<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  
  <title>信息搜集指南 | Hustler&#39;s Blog</title>
  <meta name="author" content="Hustler">
  
  <meta name="description" content="Everybody needs love,but hacker dont">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="信息搜集指南"/>
  <meta property="og:site_name" content="Hustler&#39;s Blog"/>

  
    <meta property="og:image" content=""/>
  

  
    <link rel="alternative" href="/atom.xml" title="Hustler&#39;s Blog" type="application/atom+xml">
  
  
    <link href="/favicon.png" rel="icon">
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/prism.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70812759-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70812759-1');
</script>


<meta name="generator" content="Hexo 7.1.1"></head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">Hustler&#39;s Blog</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class=""></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class=""></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class=""></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class=""></i>About
			</a>
		  </li>
		  
		  <li>
			<a href="/archives" title="Subscribe me.">
			  <i class=""></i>RSS
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header">
			<h1> 信息搜集指南</h1>
		</div>
	


<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	
	<!-- content -->
	<div class="mypage">		
	  		

	  <h1 id="信息搜集"><a href="#信息搜集" class="headerlink" title="信息搜集"></a>信息搜集</h1><p>信息搜集大致可分为两部分，被动信息搜集和主动信息搜集，主要需要搜集目标的组织架构，资产信息和人员信息等，一次好的信息搜集是渗透测试成功的必备基础</p>
<h2 id="假身份准备"><a href="#假身份准备" class="headerlink" title="假身份准备"></a>假身份准备</h2><p>渗透过程中必要准备假身份，邮箱接码，短信接码平台<br>假信息生成：xialiao插件（bp）<br><a target="_blank" rel="noopener" href="https://github.com/smxiazi/xia_Liao/releases">https://github.com/smxiazi/xia_Liao/releases</a></p>
<p>免实名流量卡：<br><a target="_blank" rel="noopener" href="http://bk.eyshop.cn/?thread-1.htm">http://bk.eyshop.cn/?thread-1.htm</a></p>
<p>手机接码：<br><a target="_blank" rel="noopener" href="https://www.uomsg.com/appweb/main.html">https://www.uomsg.com/appweb/main.html</a><br><a target="_blank" rel="noopener" href="https://www.smsonline.cloud/zh/country/china">https://www.smsonline.cloud/zh/country/china</a><br><a target="_blank" rel="noopener" href="https://sms.qisms.com/index">https://sms.qisms.com/index</a><br><a target="_blank" rel="noopener" href="https://sms-activate.org/">https://sms-activate.org/</a></p>
<p>邮箱接码：<br>所谓的十分钟邮箱类<br><a target="_blank" rel="noopener" href="http://www.yopmail.com/zh/">http://www.yopmail.com/zh/</a><br><a target="_blank" rel="noopener" href="https://10minutemail.com/">https://10minutemail.com/</a><br><a target="_blank" rel="noopener" href="https://10minutemail.net/">https://10minutemail.net/</a><br><a target="_blank" rel="noopener" href="https://www.guerrillamail.com/zh/inbox">https://www.guerrillamail.com/zh/inbox</a><br><a target="_blank" rel="noopener" href="http://www.fakemailgenerator.com/">http://www.fakemailgenerator.com/</a><br><a target="_blank" rel="noopener" href="https://temp-mail.org/en/">https://temp-mail.org/en/</a><br><a target="_blank" rel="noopener" href="https://www.guerrillamail.com/">https://www.guerrillamail.com/</a><br><a target="_blank" rel="noopener" href="http://tool.chacuo.net/mailsend">http://tool.chacuo.net/mailsend</a><br><a target="_blank" rel="noopener" href="https://maildrop.cc/">https://maildrop.cc/</a><br><a target="_blank" rel="noopener" href="http://tool.chacuo.net/mailanonymous">http://tool.chacuo.net/mailanonymous</a><br><a target="_blank" rel="noopener" href="https://tempmail.altmails.com/">https://tempmail.altmails.com/</a><br><a target="_blank" rel="noopener" href="https://www.snapmail.cc/">https://www.snapmail.cc/</a><br><a target="_blank" rel="noopener" href="https://www.linshi-email.com/">https://www.linshi-email.com/</a></p>
<p>匿名邮箱<br><a target="_blank" rel="noopener" href="https://mail.protonmail.com/inbox">https://mail.protonmail.com/inbox</a><br><a target="_blank" rel="noopener" href="https://www.fastmail.com/">https://www.fastmail.com/</a><br><a target="_blank" rel="noopener" href="https://github.com/xyfir/ptorx">https://github.com/xyfir/ptorx</a><br><a target="_blank" rel="noopener" href="https://tutanota.com/">https://tutanota.com/</a></p>
<h2 id="漏洞库"><a href="#漏洞库" class="headerlink" title="漏洞库"></a>漏洞库</h2><p>CVE合集：<a target="_blank" rel="noopener" href="https://fedisecfeeds.github.io/">https://fedisecfeeds.github.io/</a><br>各种wy876遗留版：<a target="_blank" rel="noopener" href="https://github.com/eeeeeeeeee-code/POC/tree/main">https://github.com/eeeeeeeeee-code/POC/tree/main</a><br>wooyun 历史漏洞库：<a target="_blank" rel="noopener" href="http://www.anquan.us/">http://www.anquan.us/</a><br>漏洞银行：<a target="_blank" rel="noopener" href="https://www.bugbank.cn/">https://www.bugbank.cn/</a><br>360 补天：<a target="_blank" rel="noopener" href="https://www.butian.net/">https://www.butian.net/</a><br>教育行业漏洞报告平台：<a target="_blank" rel="noopener" href="https://src.edu-info.edu.cn/login/">https://src.edu-info.edu.cn/login/</a><br>seebug：<a target="_blank" rel="noopener" href="https://paper.seebug.org/">https://paper.seebug.org/</a><br>CNVD：<a target="_blank" rel="noopener" href="http://www.cnnvd.org.cn/">http://www.cnnvd.org.cn/</a><br>Exploit Database: <a target="_blank" rel="noopener" href="https://www.exploit-db.com/">https://www.exploit-db.com</a><br>Vulners: <a target="_blank" rel="noopener" href="https://vulners.com/">https://vulners.com</a><br>zone-h：<a target="_blank" rel="noopener" href="http://zone-h.org/archive?hz=1">http://zone-h.org/archive?hz=1</a><br>Sploitus: <a target="_blank" rel="noopener" href="https://sploitus.com/">https://sploitus.com</a><br>历史界面：wayback：<a target="_blank" rel="noopener" href="https://archive.org/web/">https://archive.org/web/</a><br>工具：waybackurls：<a target="_blank" rel="noopener" href="https://github.com/tomnomnom/waybackurls">https://github.com/tomnomnom/waybackurls</a><br>阿里云漏洞库 OSCS开源安全情报 qianxin威胁情报 微步漏洞通告 启明星辰漏洞通告<br>Known Exploited Vulnerabilities Catalog<br>Apache Struts2 Security Bulletins<br>0daytoday<br>NVD（美国国家安全区漏洞库）</p>
<h2 id="被动信息搜集"><a href="#被动信息搜集" class="headerlink" title="被动信息搜集"></a>被动信息搜集</h2><p>被动信息搜集又称开源情报，是指能在网上使用各种开放的被动的方法来进行的信息搜集，比如whois查询，dns解析查询，子域名证书查询，icp备案查询，seo查询，域名信息反查等等，这类搜集往往是正常的交互，目标几乎不会有感知</p>
<h3 id="组织架构信息和主域名资产搜集"><a href="#组织架构信息和主域名资产搜集" class="headerlink" title="组织架构信息和主域名资产搜集"></a>组织架构信息和主域名资产搜集</h3><p>我们可以使用小蓝本，天眼查，企查查等平台来查询目标的相关组织架构，资产要精确定位，如子公司，孙公司，一般选择控股占比%50以上的单位，并要确认是否目标单位确认资产，组织架构，工商数据信息来源大致如下：</p>
<pre class="line-numbers language-none"><code class="language-none">- 爱企查
- 企查查
- 天眼查 根据前面获取的企业名称可以获取目标企业的微信公众号、微博、备案站点、APP、软件著作权等信息
- 启信宝
- 小蓝本
- icp官网备案查询：https:&#x2F;&#x2F;beian.miit.gov.cn&#x2F;#&#x2F;Intergrated&#x2F;index 可以查询该单位备案的其它网站
- 公安部备案查询<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>重点关注企业股权架构，网站icp备案信息，对外公布的产品（小程序，公众号app，iot设备等），法人电话邮箱等信息，以获取控股子公司名称，收集边缘子公司资产，获取备案根域名，获取其他互联网资产，收集用户名等信息<br>可以使用工具：<a target="_blank" rel="noopener" href="https://github.com/wgpsec/ENScan_GO">https://github.com/wgpsec/ENScan_GO</a><br>这里使用企查查的股权穿透图，可以看到这家公司的组织架构情况，可以看到，这家公司完全由一个股东掌握，旗下没有子公司和其他组织架构：<br><img src="/images/InformationGather/hw11-1.JPG"><br>在天眼查和爱企查上得到了相同的结果，可以基本确定这个企业只有这一家公司<br>同时我们还可以获得人员的一些相关信息，比如老板的姓名，电话，邮箱，公司的官网等，为下一步的资产搜集和钓鱼做准备<br>还可进入官网，搜集相关的电话和联系方式，结合这些信息和SGK工具，基本能得到一些人员的个人敏感信息，接下来可以检查以下这些信息，筛选处有效的供下面的流程使用<br><img src="/images/InformationGather/hw11-28.JPG"></p>
<h4 id="whois"><a href="#whois" class="headerlink" title="whois"></a>whois</h4><p>whois对测试中小型网站比较有用，因为其whois注册人信息往往就是管理员的信息，通过注册人的手机号码，姓名，邮箱等信息，可以反查处所注册过的域名，扩大暴露面</p>
<pre class="line-numbers language-none"><code class="language-none">常用whois查询网站：
- 爱站 https:&#x2F;&#x2F;whois.aizhan.com&#x2F;
- 站长之家 http:&#x2F;&#x2F;whois.chinaz.com&#x2F;
- VirusTotal 国外
- 微步
- 全球whois查询
- ViewDNS
- who.is https:&#x2F;&#x2F;who.is&#x2F;
- 阿里云域名信息查询 https:&#x2F;&#x2F;whois.aliyun.com
- 腾讯查询 https:&#x2F;&#x2F;whois.cloud.tencent.com&#x2F;
- 中国互联网信息中心 http:&#x2F;&#x2F;ipwhois.cnnic.net.cn&#x2F;
- Bugscanner http:&#x2F;&#x2F;whois.bugscaner.com
- 国外BGP https:&#x2F;&#x2F;bgp.he.net
- IP138网站 https:&#x2F;&#x2F;site.ip138.com&#x2F;
- ICANN LOOKUP https:&#x2F;&#x2F;lookup.icann.org&#x2F;
- 狗狗查询 https:&#x2F;&#x2F;www.ggcx.com&#x2F;main&#x2F;integrated
......

常用whois反查：
- 邮箱反查：http:&#x2F;&#x2F;whois.chinaz.com&#x2F;reverse?ddlSearchMode&#x3D;1
- 注册人反查：http:&#x2F;&#x2F;whois.chinaz.com&#x2F;reverse?ddlSearchMode&#x3D;1
- 电话反查：http:&#x2F;&#x2F;whois.chinaz.com&#x2F;reverse?ddlSearchMode&#x3D;1
- 微步
- 4.cn
- 西部数码
- ViewDNS<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>使用kali查询其官网相关信息（也可以用在线的），不过自从新的政策出台后，whois的数据变少了，以下是nslookup结果示例：<br><img src="/images/InformationGather/hw11-2.JPG"></p>
<h4 id="ICP备案查询"><a href="#ICP备案查询" class="headerlink" title="ICP备案查询"></a>ICP备案查询</h4><p>查到ICP备案号后，可以结合测绘引擎，或者icp反查来查找更多主域名：</p>
<pre class="line-numbers language-none"><code class="language-none">常用查询网站：
https:&#x2F;&#x2F;beian.miit.gov.cn&#x2F;#&#x2F;Integrated&#x2F;index
https:&#x2F;&#x2F;www.beianx.cn&#x2F;
https:&#x2F;&#x2F;icp.chinaz.com&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="SEO查询"><a href="#SEO查询" class="headerlink" title="SEO查询"></a>SEO查询</h4><p>常用查询网：<br><a target="_blank" rel="noopener" href="https://www.aizhan.com/cha/">https://www.aizhan.com/cha/</a><br><a target="_blank" rel="noopener" href="http://seo.chinaz.com/">http://seo.chinaz.com/</a></p>
<h4 id="Wayback-Machine网页快照"><a href="#Wayback-Machine网页快照" class="headerlink" title="Wayback Machine网页快照"></a>Wayback Machine网页快照</h4><p><a target="_blank" rel="noopener" href="https://web.archive.org/">https://web.archive.org/</a><br>需要科学上网，可以查看这个域名以前的网页的一些信息</p>
<h4 id="社交媒体，开发教程等敏感信息"><a href="#社交媒体，开发教程等敏感信息" class="headerlink" title="社交媒体，开发教程等敏感信息"></a>社交媒体，开发教程等敏感信息</h4><p>可以尝试在抖音，快手，小红书，白马盘，语雀等平台搜索相关目标关键词（比如找edu账号），可以搜到很多信息，还可以尝试翻找部署教程视频，说明书等，有时可以找到暴露的测试账号甚至密码</p>
<h5 id="网盘搜索"><a href="#网盘搜索" class="headerlink" title="网盘搜索"></a>网盘搜索</h5><p>在线平台：<br><a target="_blank" rel="noopener" href="https://lzpan.com/">https://lzpan.com/</a><br>凌风云：<a target="_blank" rel="noopener" href="https://www.lingfengyun.com/">https://www.lingfengyun.com/</a><br>蓝菊花：<a target="_blank" rel="noopener" href="http://www.lanjuhua.com/">http://www.lanjuhua.com/</a><br>大力盘：<a target="_blank" rel="noopener" href="https://www.dalipan.com/">https://www.dalipan.com/</a><br>猪猪盘：<a target="_blank" rel="noopener" href="http://www.zhuzhupan.com/">http://www.zhuzhupan.com/</a><br>PanSou：<a target="_blank" rel="noopener" href="http://www.pansou.com/">http://www.pansou.com/</a><br>盘飞飞：<a target="_blank" rel="noopener" href="https://panfeifei.com/">https://panfeifei.com/</a><br>白马盘</p>
<p>搜索关键词<br>关键词一般以单位名称、别称、产品业务等</p>
<p>爬虫：<br><a target="_blank" rel="noopener" href="https://github.com/search?q=%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E7%88%AC%E8%99%AB">https://github.com/search?q=%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E7%88%AC%E8%99%AB</a><br><a target="_blank" rel="noopener" href="https://www.yzzpan.com/#sharefile=trOPDGQC_54416">https://www.yzzpan.com/#sharefile=trOPDGQC_54416</a></p>
<h4 id="个人敏感信息"><a href="#个人敏感信息" class="headerlink" title="个人敏感信息"></a>个人敏感信息</h4><p>包SGK的</p>
<p>从邮箱查询<br>你注册过哪些网站？一搜便知：<a target="_blank" rel="noopener" href="https://www.reg007.com/">https://www.reg007.com/</a></p>
<p>Find email addresses in seconds • Hunter (Email Hunter) - email 信息查询工具<br><a target="_blank" rel="noopener" href="https://hunter.io/">https://hunter.io/</a></p>
<p>从用户名查询<br>Instant Username Search - 实时搜索100多个社交媒体网站的用户名。<br><a target="_blank" rel="noopener" href="https://instantusername.com/#/">https://instantusername.com/#/</a></p>
<p>CheckUsernames - 测某账号是否在全球500多个社交媒体中是否有注册。<br><a target="_blank" rel="noopener" href="https://checkusernames.com/">https://checkusernames.com/</a></p>
<p>WhatsMyName Web - 搜索许多网站上存在的用户名。<br><a target="_blank" rel="noopener" href="https://whatsmyname.app/">https://whatsmyname.app/</a></p>
<p>NameCheckup - 查找可用的用户名<br><a target="_blank" rel="noopener" href="https://namecheckup.com/">https://namecheckup.com/</a></p>
<p>Namechk<br><a target="_blank" rel="noopener" href="https://namechk.com/">https://namechk.com/</a></p>
<p>KnowEm Username Search<br><a target="_blank" rel="noopener" href="https://knowem.com/">https://knowem.com/</a></p>
<p>sherlock-project&#x2F;sherlock - 在不同的社交网络上通过用户名搜寻账户<br><a target="_blank" rel="noopener" href="https://github.com/sherlock-project/sherlock">https://github.com/sherlock-project/sherlock</a></p>
<p>从IP查询<br>Torrent downloads and distributions for IP - 查你这个IP下载过哪些磁力链接?<br><a target="_blank" rel="noopener" href="http://iknowwhatyoudownload.com/">http://iknowwhatyoudownload.com/</a></p>
<p>混合查询<br>Username Search - 找到用户名、电子邮件地址或电话号码背后的人。<br><a target="_blank" rel="noopener" href="https://usersearch.org/">https://usersearch.org/</a></p>
<p>n0tr00t&#x2F;Sreg - 使用者通过输入 email、phone、username 的返回用户注册的所有互联网信息.<br><a target="_blank" rel="noopener" href="https://github.com/n0tr00t/Sreg">https://github.com/n0tr00t/Sreg</a></p>
<p>Humanitarian Data Exchange - Facebook 的公开数据查询平台<br><a target="_blank" rel="noopener" href="https://data.humdata.org/organization/facebook">https://data.humdata.org/organization/facebook</a></p>
<p>银行卡号归属地查询<br><a target="_blank" rel="noopener" href="http://cha.yinhangkadata.com/">http://cha.yinhangkadata.com/</a></p>
<p>友商发·票查询<br><a target="_blank" rel="noopener" href="http://fapiao.youshang.com/">http://fapiao.youshang.com/</a></p>
<p>TG库、四件套等。</p>
<p>从注册信息查询<br>Sms<br><a target="_blank" rel="noopener" href="https://www.materialtools.com/">https://www.materialtools.com/</a><br><a target="_blank" rel="noopener" href="http://receivefreesms.com/">http://receivefreesms.com/</a><br>Email<br><a target="_blank" rel="noopener" href="https://10minutemail.net/">https://10minutemail.net/</a><br><a target="_blank" rel="noopener" href="http://24mail.chacuo.net/">http://24mail.chacuo.net/</a><br><a target="_blank" rel="noopener" href="https://zh.mytrashmailer.com/">https://zh.mytrashmailer.com/</a><br><a target="_blank" rel="noopener" href="http://24mail.chacuo.net/enus">http://24mail.chacuo.net/enus</a><br><a target="_blank" rel="noopener" href="https://www.linshiyouxiang.net/">https://www.linshiyouxiang.net/</a><br>Fake id<br><a target="_blank" rel="noopener" href="https://www.fakenamegenerator.com/">https://www.fakenamegenerator.com/</a><br><a target="_blank" rel="noopener" href="http://www.haoweichi.com/">http://www.haoweichi.com/</a><br><a target="_blank" rel="noopener" href="https://www.fakeaddressgenerator.com/">https://www.fakeaddressgenerator.com/</a></p>
<h4 id="邮箱搜集"><a href="#邮箱搜集" class="headerlink" title="邮箱搜集"></a>邮箱搜集</h4><p>有时候不仅是正面硬刚就可以的，还需要迂回战术配合出击，正如攻防中社工一样，总会有一些意想不到的成果。随着办公网络的发展，邮箱也成为了常用的办公方式之一。攻防也是从信息收集逐渐延伸到钓鱼上，只要钓鱼技术好，轻轻松松混入内部，而要想社工钓鱼玩得溜，邮件方面是一个重要的突破口。</p>
<p>tips: 邮箱建议做筛选，把一些疑是网络管理员、运维人员、安全部门的人员提取出来，单独发送或者不发，由于这部分人员安全意识偏高，容易打草惊蛇，一般多针对非技术人员，容易下手。</p>
<p>邮箱入口查找方法<br>邮件服务器主要从端口和title标识两个信息点去确认的。<br>邮件服务器常见端口：<br>25<br>109<br>110<br>143<br>465<br>995<br>993</p>
<p>邮件服务器常见title：<br>邮箱登录<br>Coremail<br>eYou邮件系统<br>TurboMail<br>Exchange</p>
<p>C段扫描寻找入口<br>获取到目标后，从目标mx记录域名找到他的真实ip，若是第三方邮件服务器，MX记录就没啥参考价值了。<br>对获取到的真实ip这个段进行C段扫描，有时候也可以进行B段扫描。然后通过端口、title去确定邮件服务器信息。C段扫描方法可以参考上文C段收集章节。</p>
<p>通过子域名扫描寻找入口<br>主要通过一些子域名收集工具去确认，如：Subdomainbrute、ksubdomain、Oneforall、Sublist3r、TeeMO、LangSrcCurise、Layer挖掘机等。</p>
<p>以上这些都是主动搜集的行为，不建议在被动信息搜集阶段进行<br>战场主力也还是Google hacking和网络空间搜索引擎</p>
<p>Google Hacking<br>site:target.com intitle:”Outlook Web App”<br>site:target.com intitle:”mail”<br>site:target.com intitle:”邮箱”</p>
<p>测绘引擎：fofa 0.zone<br>(group=&#x3D;阿里&amp;&amp;title=&#x3D;邮箱)</p>
<p>有时候github一些仓库代码中也会存在邮箱信息。<br>一般都会有邮箱、手机号等官方联系方式信息。</p>
<h5 id="在线平台"><a href="#在线平台" class="headerlink" title="在线平台"></a>在线平台</h5><p><a target="_blank" rel="noopener" href="https://app.snov.io/">https://app.snov.io/</a><br>该站点的Google插件更方便<br><a target="_blank" rel="noopener" href="https://snov.io/knowledgebase/how-to-use-snovio-extension-for-chrome/">https://snov.io/knowledgebase/how-to-use-snovio-extension-for-chrome/</a></p>
<p><a target="_blank" rel="noopener" href="https://hunter.io/">https://hunter.io/</a><br><a target="_blank" rel="noopener" href="https://phonebook.cz/">https://phonebook.cz/</a><br><a target="_blank" rel="noopener" href="https://intelx.io/">https://intelx.io/</a><br><a target="_blank" rel="noopener" href="http://www.skymem.info/">http://www.skymem.info/</a></p>
<p>企查查 爱企查</p>
<p>如使用八爪鱼采集器进行批量查询<br><a target="_blank" rel="noopener" href="https://www.bazhuayu.com/tutorial/qccqyemailcj">https://www.bazhuayu.com/tutorial/qccqyemailcj</a><br>邮箱泄露信息查询<br><a target="_blank" rel="noopener" href="https://monitor.firefox.com/">https://monitor.firefox.com/</a><br><a target="_blank" rel="noopener" href="https://haveibeenpwned.com/">https://haveibeenpwned.com/</a><br><a target="_blank" rel="noopener" href="https://ghostproject.fr/">https://ghostproject.fr/</a></p>
<p>其他<br><a target="_blank" rel="noopener" href="https://app.apollo.io/">https://app.apollo.io</a><br><a target="_blank" rel="noopener" href="https://contactout.com/">https://contactout.com</a><br><a target="_blank" rel="noopener" href="https://www.datanyze.com/">https://www.datanyze.com</a><br><a target="_blank" rel="noopener" href="https://www.email-format.com/">https://www.email-format.com</a><br>TG社工库、其他社工库</p>
<h5 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h5><p><a target="_blank" rel="noopener" href="https://github.com/laramies/theHarvester">https://github.com/laramies/theHarvester</a></p>
<h5 id="邮箱验证"><a href="#邮箱验证" class="headerlink" title="邮箱验证"></a>邮箱验证</h5><p>收集到邮箱后，就要对其进行存活性验证，避免出现被弃用、不可用的邮箱。</p>
<p>在线平台：<br><a target="_blank" rel="noopener" href="http://tool.chacuo.net/mailverify">http://tool.chacuo.net/mailverify</a><br><a target="_blank" rel="noopener" href="https://verify-email.org/">https://verify-email.org/</a><br><a target="_blank" rel="noopener" href="http://www.emailcamel.com/">http://www.emailcamel.com/</a><br><a target="_blank" rel="noopener" href="https://www.verifyemailaddress.org/">https://www.verifyemailaddress.org/</a><br><a target="_blank" rel="noopener" href="https://app.snov.io/verify/individual-emails">https://app.snov.io/verify/individual-emails</a></p>
<p>工具：<br><a target="_blank" rel="noopener" href="https://github.com/Tzeross/verifyemail">https://github.com/Tzeross/verifyemail</a></p>
<h5 id="邮箱爆破"><a href="#邮箱爆破" class="headerlink" title="邮箱爆破"></a>邮箱爆破</h5><p>邮箱爆破<br>弱口令爆破方式只适用于目标企业自己的邮件服务器如owa等，对第三方邮箱不优先考虑</p>
<p>常用字典组合<br>员工名称拼音&#x2F;首字母<br>员工名称拼音&#x2F;首字母+日期<br>公司简称+年份<br>员工名称+公司名<br>passwd+日期<br>P@sswd!+日期</p>
<p>爆破字典<br><a target="_blank" rel="noopener" href="https://github.com/rootphantomer/Blasting_dictionary">https://github.com/rootphantomer/Blasting_dictionary</a><br><a target="_blank" rel="noopener" href="https://github.com/TheKingOfDuck/fuzzDicts">https://github.com/TheKingOfDuck/fuzzDicts</a></p>
<p>工具<br>爆破邮箱大概分为两种情况</p>
<p>网页邮箱爆破<br>burpsuite等</p>
<p>STMP协议等邮箱端口爆破<br>medusa、hydra、SNETCracker、GoMapEnum、APT34组织 owa爆破工具等（多数工具kali都自带）<br>邮箱相关端口：<br>SMTP默认端口：25<br>POP3默认端口：110<br>IMAP默认端口：143</p>
<h4 id="空间测绘引擎"><a href="#空间测绘引擎" class="headerlink" title="空间测绘引擎"></a>空间测绘引擎</h4><p>我们可以通过查找一些共性的特征来找资产，比如同一个icon的站点等等<br>各个国家代码：<a target="_blank" rel="noopener" href="https://zhidao.baidu.com/question/750335434727022652.html">https://zhidao.baidu.com/question/750335434727022652.html</a><br>基于测绘引擎的被动指纹探索油猴脚本：<a target="_blank" rel="noopener" href="https://github.com/0x727/Space_view">https://github.com/0x727/Space_view</a></p>
<h5 id="FOFA"><a href="#FOFA" class="headerlink" title="FOFA"></a>FOFA</h5><p>使用语法分别搜索ylxweb.com和ylxweb.cn：</p>
<pre class="line-numbers language-none"><code class="language-none">domain&#x3D;&quot;ylxweb.com&quot; &amp;&amp; country&#x3D;&quot;CN&quot; &amp;&amp; region!&#x3D;&quot;HK&quot; &amp;&amp; region!&#x3D;&quot;TW&quot; &amp;&amp; region!&#x3D;&quot;MO&quot;
# 搜索中国大陆域名为ylxweb.com的资产

&quot;亿路航&quot; &amp;&amp; country&#x3D;&quot;CN&quot; &amp;&amp; region!&#x3D;&quot;HK&quot; &amp;&amp; region!&#x3D;&quot;TW&quot; &amp;&amp; region!&#x3D;&quot;MO&quot; &amp;&amp; (title&#x3D;&quot;登录&quot; || title&#x3D;&quot;系统&quot; || title&#x3D;&quot;后台&quot; || title&#x3D;&quot;平台&quot; || title&#x3D;&quot;管理&quot; || title&#x3D;&quot;入口&quot;)
# 搜索亿路航相关信息

&quot;山东大学&quot; &amp;&amp; country&#x3D;&quot;CN&quot; &amp;&amp; region!&#x3D;&quot;HK&quot; &amp;&amp; region!&#x3D;&quot;TW&quot; &amp;&amp; region!&#x3D;&quot;MO&quot; &amp;&amp; (title&#x3D;&quot;登录&quot; || title&#x3D;&quot;系统&quot; || title&#x3D;&quot;后台&quot; || title&#x3D;&quot;平台&quot; || title&#x3D;&quot;管理&quot; || title&#x3D;&quot;入口&quot; || title&#x3D;&quot;宿舍&quot; || title&#x3D;&quot;门禁&quot; || title&#x3D;&quot;人脸&quot;)
# edu<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>找到有趣的资产：<br><img src="/images/InformationGather/hw11-7.JPG"><br>还有数个子域名或子站点：</p>
<pre class="line-numbers language-none"><code class="language-none">120.76.52.201 nginx
120.76.52.201:8080
api.ylxweb.com Kaede&#x2F;3.5.3.865 120.24.174.159 
nb.api.ylxweb.com Kaede&#x2F;3.5.3.865 120.24.174.159 
https:&#x2F;&#x2F;nb.api.ylxweb.com
https:&#x2F;&#x2F;api.ylxweb.com
static.ylxweb.com Tengine 121.207.229.250 
https:&#x2F;&#x2F;static.ylxweb.com

test.ylxweb.com:3306 119.23.146.168 
Mysql Version: 5.7.24-log 

N\x00\x00\x00
5.7.24-log\x00\xf6\x1a\x00\x00OnJe\x0e kj\x00\xff\xf7-\x02\x00\xff\x81\x15\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00&#123;AXj8|\x0e&#125;(&quot;\x05q\x00mysql_native_password\x00

https:&#x2F;&#x2F;mail.ylxweb.com 183.47.114.101  nginx
https:&#x2F;&#x2F;treayoung.ylxweb.cn
https:&#x2F;&#x2F;tbsdev.ylxweb.cn<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="Hunter"><a href="#Hunter" class="headerlink" title="Hunter"></a>Hunter</h5><p>发现数个站点：</p>
<pre class="line-numbers language-none"><code class="language-none">使用语法：
domain&#x3D;&quot;ylxweb.com&quot; &amp;&amp; ip.country&#x3D;&quot;CN&quot;
web.body&#x3D;&quot;亿路航&quot;&amp;&amp;ip.country&#x3D;&quot;CN&quot;

hdcx.66239779.com nginx1.19.6 39.108.69.220 登录界面
work.ylxweb.com
sfc.ylxweb.com:9092
cd.ylxweb.cn
sfc.ylxweb.com:9093
sfc.ylxweb.com:9094
sfc.ylxweb.com:9091 #nginx1.9.9<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/images/InformationGather/hw11-8.JPG"><br>发现sfc.ylxweb.com有不同的情况</p>
<h5 id="360-QUAKE"><a href="#360-QUAKE" class="headerlink" title="360 QUAKE"></a>360 QUAKE</h5><p>同样使用了上文的语法，发现以下可疑站点：</p>
<pre class="line-numbers language-none"><code class="language-none">test.ylxweb.com:9094
test.ylxweb.com:9093
test.ylxweb.com:9092
test.ylxweb.com:9091 #nginx1.9.9
wxkfpt.ylxweb.com
sfc.api.ylxweb.com
wxkfpt.te.ylxweb.com
tbs.ylxweb.cn 登录口
m.ylxweb.cn<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/images/InformationGather/hw11-9.JPG"><br><img src="/images/InformationGather/hw11-10.JPG"><br><img src="/images/InformationGather/hw11-11.JPG"><br>还能看到貌似是使用了阿里云的Tengine和nginx1.9.9，特别是tbs.ylxweb.cn这个站，是一个登录口，跟主站的运营业务相关，有趣的是tbs.ylxweb.cn也开启了9091-9094端口，也是返回的ok</p>
<h5 id="钟馗之眼"><a href="#钟馗之眼" class="headerlink" title="钟馗之眼"></a>钟馗之眼</h5><p><a target="_blank" rel="noopener" href="https://www.zoomeye.org/">https://www.zoomeye.org/</a><br>居然还活着，好久没用了，但是没搜出来什么，略</p>
<h5 id="Shodan"><a href="#Shodan" class="headerlink" title="Shodan"></a>Shodan</h5><p><a target="_blank" rel="noopener" href="https://www.shodan.io/">https://www.shodan.io</a><br>这个搜国外的可能会好点，以前常用，也没搜出来什么，略</p>
<h5 id="censys"><a href="#censys" class="headerlink" title="censys"></a>censys</h5><p><a target="_blank" rel="noopener" href="https://search.censys.io/">https://search.censys.io/</a><br>小众平台，适合海外</p>
<h4 id="Google-Hacking"><a href="#Google-Hacking" class="headerlink" title="Google Hacking"></a>Google Hacking</h4><p>二开谷歌语法：<br><a target="_blank" rel="noopener" href="https://dorks.faisalahmed.me/">https://dorks.faisalahmed.me/</a><br>Google Hacking语法搜漏洞总结列表：<br><a target="_blank" rel="noopener" href="https://www.exploit-db.com/google-hacking-database">https://www.exploit-db.com/google-hacking-database</a><br>基本语法：</p>
<table>
<thead>
<tr>
<th align="center">指令</th>
<th align="center">用法</th>
<th align="center">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="center">“”（引号）</td>
<td align="center">用引号来查询一个确切的单词或短语</td>
<td align="center">查找有关《百年孤独》这本书的网页，语法：“百年孤独”</td>
</tr>
<tr>
<td align="center">OR（或者）</td>
<td align="center">用OR分隔搜索词，同时执行两个搜索查询，这将找到包含多个单词之一的页面。</td>
<td align="center">搜索引用了“Google Drive”、“Dropbox”或“OneDrive”的页面，语法：Google Drive OR Dropbox OR OneDrive</td>
</tr>
<tr>
<td align="center">-（减号、连字符）</td>
<td align="center">在单词或网站前使用连字符将其从搜索结果中排除</td>
<td align="center">从搜索结果中排除www主机名，语法：-www site:wikipedia.org</td>
</tr>
<tr>
<td align="center">allintext:</td>
<td align="center">使用allintext:[搜索短语]查找正文中包含这些单词的页面</td>
<td align="center">查找正文中有关Roth、IRA投资讯息的页面，语法：allintext:Roth IRA 投资</td>
</tr>
<tr>
<td align="center">allintitle:</td>
<td align="center">使用allintitle:[搜索短语]查找标题中包含这些单词的页面</td>
<td align="center">查找标题中同时包含“Apple”和“notebook”的页面，语法：allintitle:Apple notebook</td>
</tr>
<tr>
<td align="center">allinurl:</td>
<td align="center">使用allinurl:[搜索短语]查找URL中包含这些单词的页面</td>
<td align="center">查找URL中同时包含”Microsoft” and “Surface”的页面，语法：allinurl:Microsoft Surface</td>
</tr>
<tr>
<td align="center">site:</td>
<td align="center">使用site:[URL]将搜索结果限制到特定网站</td>
<td align="center">查找云点SEO网关于谷歌SEO的页面，语法：site:yundianseo.com 谷歌SEO</td>
</tr>
<tr>
<td align="center">~（波浪号）</td>
<td align="center">使用波浪号获得目标关键词及其近似词的搜索结果</td>
<td align="center">查找SEO方面的策略或者教程，语法：SEO ~教程</td>
</tr>
<tr>
<td align="center">related:</td>
<td align="center">使用related:[URL]查找与特定网站类似的网站</td>
<td align="center">查找与云点SEO类似的网站，语法：related:yundianseo.com</td>
</tr>
<tr>
<td align="center">define:</td>
<td align="center">使用define:[搜索短语]查找其定义</td>
<td align="center">查找SEO的定义，语法：define:SEO</td>
</tr>
<tr>
<td align="center">$</td>
<td align="center">使用$查找特定价格的商品</td>
<td align="center">查找一款售价在99美金的手机，语法：mobile phone $99</td>
</tr>
<tr>
<td align="center">location:</td>
<td align="center">使用location:[地点]查看某个地区内的相关信息</td>
<td align="center">查询南京的酒店，语法：hotel location:Nanjing</td>
</tr>
<tr>
<td align="center"><code>*</code>（星号）</td>
<td align="center">添加星号作为未知单词或事实的占位符</td>
<td align="center">查找以“生活就像一个”开头的引语，语法：<code>生活就像一个*</code></td>
</tr>
<tr>
<td align="center">filetype:</td>
<td align="center">使用filetype:[后缀]将结果限制为特定的文件格式，如PDF或DOC。</td>
<td align="center">查找PDF格式的Microsoft Office键盘快捷键相关文件，语法：filetype:pdf Microsoft Office键盘快捷键</td>
</tr>
<tr>
<td align="center">..（两点）</td>
<td align="center">用两个句点分隔数字，不带空格，以搜索该范围内的数字</td>
<td align="center">查找1950年至2000年间发生的计算机里程碑，语法：”计算机里程碑” 1950..2000</td>
</tr>
<tr>
<td align="center">AROUND(n)</td>
<td align="center">在两个搜索词之间加上AROUND(n)，以查找两个词间有特定距离的页面。用数字n设置术语之间的最大距离，这对于查找两个搜索词之间的关系很有用。</td>
<td align="center">查找在同一句话或段落中提到Facebook和Microsoft的页面，语法：Facebook AROUND(7) Microsoft</td>
</tr>
</tbody></table>
<p>Google Hacking常用语法：<br>常用黑客语法更新网站：<br><a target="_blank" rel="noopener" href="https://www.exploit-db.com/google-hacking-database">https://www.exploit-db.com/google-hacking-database</a><br><a target="_blank" rel="noopener" href="https://cxsecurity.com/dorks/">https://cxsecurity.com/dorks/</a><br><a target="_blank" rel="noopener" href="https://github.com/BullsEye0/google_dork_list/blob/master/google_Dorks.txt">https://github.com/BullsEye0/google_dork_list/blob/master/google_Dorks.txt</a></p>
<pre class="line-numbers language-none"><code class="language-none">查找ssh公私钥泄露：
site:域名 intitle:index of &#x2F;etc&#x2F;ssh

查找root相关数据库：
site:域名（单独.edu也可以 site:.edu） filetype:xls &quot;root&quot; database

inurl:&quot;cgi-bin&#x2F;koha&quot;
intitle:&quot;SSL Network Extender Login&quot; -checkpoint.com
intext:&quot;siemens&quot; &amp; inurl:&quot;&#x2F;portal&#x2F;portal.mwsl&quot;
intext:GlobalProtect Portal

查找后台地址：
site:域名 inurl:login|admin|manage|member|admin_login|login_admin|system|login|user|main|cms
site:target.com intext:管理 | 后台 | 后台管理 | 登陆 | 登录 | 用户名 | 密码 | 系统 | 账号 | login | system  
site:target.com inurl:login | inurl:admin | inurl:manage | inurl:manager | inurl:admin_login | inurl:system | inurl:backend  
site:target.com intitle:管理 | 后台 | 后台管理 | 登陆 | 登录

查找文本内容：
site:域名 intext:管理|后台|登录|用户名|密码|验证码|系统|账号|admin|login|sys|managetem|password|username

查找可注入点：
site:域名 inurl:aspx|jsp|php|asp
site:target.com inurl:?id&#x3D;  
site:target.com inurl:php?id&#x3D;

查找上传漏洞：
site:域名 inurl:file|load|editor|Files

查找敏感文件
site:gdupt.edu.cn filetype:doc|pdf|docx|csv|xls|xlsx|xlsb|xlsm|txt|log|xml|dot|map|dotx|rtf|zip|rar|gz|xz|tar
site:target.com filetype:.doc | .docx | .xls | .xlsx | .ppt | .pptx | .odt | .pdf | .rtf | .sxw | .psw | .csv

找eweb编辑器：
site:域名 inurl:ewebeditor|editor|uploadfile|eweb|edit

存在的数据库：
site:域名 filetype:mdb|asp|#

查看脚本类型：
site:域名 filetype:asp|aspx|php|jsp

迂回策略入侵：
site:域名 inurl:cms|data|templates|images|index|

目录遍历：
site:target.com intitle: &quot;index of&quot;

SQL泄露：
site:target.com intext:&quot;sql syntax near&quot; | intext:&quot;syntax error has occurred&quot; | intext:&quot;incorrect syntax near&quot; | intext:&quot;unexpected end of SQL command&quot; | intext:&quot;Warning: mysql_connect()&quot; | intext:”Warning: mysql_query()&quot; | intext:&quot;Warning: pg_connect()&quot;

敏感信息泄露：
site:target.com ext:php intitle:phpinfo &quot;published by the PHP Group&quot;
site:target.com ext:.xml | .conf | .cnf | .reg | .inf | .rdp | .cfg | .txt | .ora | .ini
site:target.com ext:.sql | .dbf | .mdb | .db
site:target.com ext:.log
site:target.com ext:.bkf | .bkp | .old | .backup | .bak | .swp | .rar | .txt | .zip | .7z | .sql | .tar.gz | .tgz | .tar

社工信息：
site:target.com intitle:账号 | 密码 | 工号 | 学号 | 身份证

邮箱信息：
site:target.com intext:@target.com  
site:target.com 邮件  
site:target.com email<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>查了一下，没有什么成果</p>
<p><strong>tips：<br>1.判断目标是否被黑过。（如html寄生虫）<br>2.site:xx.com指定搜索发现多个垃圾数据，大概率中招过。（黑帽SEO劫持）<br>3.可搜索渗透特征痕迹（如遗留webshell、执行命令接口、黑页）<br>4.搜索常见的敏感文件、路由<br>5.发现其他人正在搜索的内容 <a target="_blank" rel="noopener" href="https://www.yundianseo.com/google-trends/">https://www.yundianseo.com/google-trends/</a><br>6.搜索结果别忘了快照信息。<br>7.百度、搜狗、bing也是可以使用语法精确搜索，但限于seo逻辑、广告、资源等多个因素，经常不如Google，但有时候结合又有不错的收获。</strong></p>
<h4 id="提炼特殊路由"><a href="#提炼特殊路由" class="headerlink" title="提炼特殊路由"></a>提炼特殊路由</h4><p>不同的站点路由其实是不一样的，在这里以若依为例，最特殊的路由是prod-api<br>因此我们从路由的角度来体验<br>一种是找超链接的提炼方式（直接搜索带有路由的页面）<br><code>body=prod-api/</code><br>可以找到站点中带有若依的超链接路由<br>打开之后我们就可以发现确实超链接指向的是若依的系统<br>如果收集的若依系统够多，可以发现存在二开的系统有其他的路由，比如admin-api dev-api 等等<br>另一种方式可能就需要用到搜索引擎去相辅相成的寻找特殊路由<br>很多开源的若依二开可以在github找到相关的项目，往往修改较多的就是默认的prod-api为主，可以按照上面的内容去提炼，这样可以直接收集各个二开若依系统</p>
<h4 id="Github泄露（其他云代码平台泄露同理）"><a href="#Github泄露（其他云代码平台泄露同理）" class="headerlink" title="Github泄露（其他云代码平台泄露同理）"></a>Github泄露（其他云代码平台泄露同理）</h4><p>使用github可以找到一些站点账号或源码，各种Github监控搞上，又可能会发现一些key，简直是宝了……</p>
<h5 id="手动搜集"><a href="#手动搜集" class="headerlink" title="手动搜集"></a>手动搜集</h5><p>网站域名、网站JS路径、网站备案、网站下的技术支持这些都可以放进去GitHub搜，github语法如下：</p>
<pre class="line-numbers language-none"><code class="language-none">精确搜索：被双引号引起来的部分代表精确匹配 如：&quot;中国移动&quot;
in:name in:name security # 查出仓库中有security关键字的项目
in:description in:name,description security # 查出仓库名或项目描述中有security关键字的项目
in:readme in:readme # 查出readme.md文件中有security关键字的项目
repo:owner&#x2F;name repo:mqlsy&#x2F;security # 查出用户mqlsy下含有security关键字的项目
stars:n stars:&gt;&#x3D;100 查出star数大于等于100的项目
pushed:YYYY-MM-DD security pushed:&gt;2022-09-10 # 查出仓库中包含security关键字，并且在2022年9月10日之后更新过的项目
created:YYYY-MM-DD security created:&lt;2022-09-10 # 查出仓库中包含security关键字，并且在2022年9月10日之前创建的项目
size:n size:&gt;&#x3D;1000 # 查出仓库大小大于等于1MB的项目
license:LICENSE_KEYWORD license:apache-2.0 # 查出仓库开源协议是apache-2.0的项目
filename:database # 查找名为database的项目文件
language:java # 查找用java编写的项目文件

filename:database language:java password
# 可以同时使用多个条件匹配，如上即匹配用java语言写的，项目名为database的，文件中含有password关键字的所有项目文件

补充部分常用语法：
&quot;token&quot;  
&quot;password&quot;  
&quot;secret&quot;  
&quot;passwd&quot;  
&quot;username&quot;  
&quot;key&quot;  
&quot;apidocs&quot;  
&quot;appspot&quot;  
&quot;auth&quot;  
&quot;aws\_access&quot;  
&quot;config&quot;  
&quot;credentials&quot;  
&quot;dbuser&quot;  
&quot;ftp&quot;  
&quot;login&quot;  
&quot;mailchimp&quot;  
&quot;mailgun&quot;  
&quot;mysql&quot;  
&quot;pass&quot;  
&quot;pem private&quot;  
&quot;prod&quot;  
&quot;pwd&quot;  
&quot;secure&quot;  
&quot;ssh&quot;  
&quot;staging&quot;  
&quot;stg&quot;  
&quot;stripe&quot;  
&quot;swagger&quot;  
&quot;testuser&quot;  
&quot;jdbc&quot;  
extension:pem private  
extension:ppk private  
extension:sql mysql dump password  
extension:json api.forecast.io  
extension:json mongolab.com  
extension:yaml mongolab.com  
extension:ica \[WFClient\] Password\&#x3D;  
extension:avastlic “support.avast.com”  
extension:js jsforce conn.login  
extension:json googleusercontent client\_secret  
“target.com” send\_keys  
“target.com” password  
“target.com” api\_key  
“target.com” apikey  
“target.com” jira\_password  
“target.com” root\_password  
“target.com” access\_token  
“target.com” config  
“target.com” client\_secret  
“target.com” user auth
&quot;.mlab.com password&quot;
&quot;AWSSecretKey&quot;
&quot;JEKYLL_GITHUB_TOKEN&quot;
&quot;SF_USERNAME salesforce&quot;
&quot;access_key&quot;
&quot;access_token&quot;
&quot;amazonaws&quot;
&quot;apiSecret&quot;
&quot;api_key&quot;
&quot;api_secret&quot;
&quot;apidocs&quot;
&quot;apikey&quot;
&quot;app_key&quot;
&quot;app_secret&quot;
&quot;appkey&quot;
&quot;appkeysecret&quot;
&quot;application_key&quot;
&quot;appsecret&quot;
&quot;appspot&quot;
&quot;auth&quot;
&quot;auth_token&quot;
&quot;authorizationToken&quot;
&quot;aws_access&quot;
&quot;aws_access_key_id&quot;
&quot;aws_key&quot;
&quot;aws_secret&quot;
&quot;aws_token&quot;
&quot;bashrc password&quot;
&quot;bucket_password&quot;
&quot;client_secret&quot;
&quot;cloudfront&quot;
&quot;codecov_token&quot;
&quot;config&quot;
&quot;conn.login&quot;
&quot;connectionstring&quot;
&quot;consumer_key&quot;
&quot;credentials&quot;
&quot;database_password&quot;
&quot;db_password&quot;
&quot;db_username&quot;
&quot;dbpasswd&quot;
&quot;dbpassword&quot;
&quot;dbuser&quot;
&quot;dot-files&quot;
&quot;dotfiles&quot;
&quot;encryption_key&quot;
&quot;fabricApiSecret&quot;
&quot;fb_secret&quot;
&quot;firebase&quot;
&quot;ftp&quot;
&quot;gh_token&quot;
&quot;github_key&quot;
&quot;github_token&quot;
&quot;gitlab&quot;
&quot;gmail_password&quot;
&quot;gmail_username&quot;
&quot;api.googlemaps AIza&quot;
&quot;herokuapp&quot;
&quot;internal&quot;
&quot;irc_pass&quot;
&quot;key&quot;
&quot;keyPassword&quot;
&quot;ldap_password&quot;
&quot;ldap_username&quot;
&quot;login&quot;
&quot;mailchimp&quot;
&quot;mailgun&quot;
&quot;master_key&quot;
&quot;mydotfiles&quot;
&quot;mysql&quot;
&quot;node_env&quot;
&quot;npmrc _auth&quot;
&quot;oauth_token&quot;
&quot;pass&quot;
&quot;passwd&quot;
&quot;password&quot;
&quot;passwords&quot;
&quot;pem private&quot;
&quot;preprod&quot;
&quot;private_key&quot;
&quot;prod&quot;
&quot;pwd&quot;
&quot;pwds&quot;
&quot;rds.amazonaws.com password&quot;
&quot;redis_password&quot;
&quot;root_password&quot;
&quot;secret&quot;
&quot;secret.password&quot;
&quot;secret_access_key&quot;
&quot;secret_key&quot;
&quot;secret_token&quot;
&quot;secrets&quot;
&quot;secure&quot;
&quot;security_credentials&quot;
&quot;send.keys&quot;
&quot;send_keys&quot;
&quot;sendkeys&quot;
&quot;sf_username&quot;
&quot;slack_api&quot;
&quot;slack_token&quot;
&quot;sql_password&quot;
&quot;ssh&quot;
&quot;ssh2_auth_password&quot;
&quot;sshpass&quot;
&quot;staging&quot;
&quot;stg&quot;
&quot;storePassword&quot;
&quot;stripe&quot;
&quot;swagger&quot;
&quot;testuser&quot;
&quot;token&quot;
&quot;x-api-key&quot;
&quot;xoxp&quot;
&quot;xoxb &quot;
HEROKU_API_KEY language:json
HEROKU_API_KEY language:shell
HOMEBREW_GITHUB_API_TOKEN language:shell
PT_TOKEN language:bash
[WFClient] Password&#x3D; extension:ica
extension:avastlic &quot;support.avast.com&quot;
extension:bat
extension:cfg
extension:env
extension:exs
extension:ini
extension:json api.forecast.io
extension:json googleusercontent client_secret
extension:json mongolab.com
extension:pem
extension:pem private
extension:ppk
extension:ppk private
extension:properties
extension:sh
extension:sls
extension:sql
extension:sql mysql dump
extension:sql mysql dump password
extension:yaml mongolab.com
extension:zsh
filename:.bash_history
filename:.bash_profile aws
filename:.bashrc mailchimp
filename:.bashrc password
filename:.cshrc
filename:.dockercfg auth
filename:.env DB_USERNAME NOT homestead
filename:.env MAIL_HOST&#x3D;smtp.gmail.com
filename:.esmtprc password
filename:.ftpconfig
filename:.git-credentials
filename:.history
filename:.htpasswd
filename:.netrc password
filename:.npmrc _auth
filename:.pgpass
filename:.remote-sync.json
filename:.s3cfg
filename:.sh_history
filename:.tugboat NOT _tugboat
filename:CCCam.cfg
filename:WebServers.xml
filename:_netrc password
filename:bash
filename:bash_history
filename:bash_profile
filename:bashrc
filename:beanstalkd.yml
filename:composer.json
filename:config
filename:config irc_pass
filename:config.json auths
filename:config.php dbpasswd
filename:configuration.php JConfig password
filename:connections
filename:connections.xml
filename:constants
filename:credentials
filename:credentials aws_access_key_id
filename:cshrc
filename:database
filename:dbeaver-data-sources.xml
filename:deploy.rake
filename:deployment-config.json
filename:dhcpd.conf
filename:dockercfg
filename:environment
filename:express.conf
filename:express.conf path:.openshift
filename:filezilla.xml
filename:filezilla.xml Pass
filename:git-credentials
filename:gitconfig
filename:global
filename:history
filename:htpasswd
filename:hub oauth_token
filename:id_dsa
filename:id_rsa
filename:id_rsa or filename:id_dsa
filename:idea14.key
filename:known_hosts
filename:logins.json
filename:makefile
filename:master.key path:config
filename:netrc
filename:npmrc
filename:pass
filename:passwd path:etc
filename:pgpass
filename:prod.exs
filename:prod.exs NOT prod.secret.exs
filename:prod.secret.exs
filename:proftpdpasswd
filename:recentservers.xml
filename:recentservers.xml Pass
filename:robomongo.json
filename:s3cfg
filename:secrets.yml password
filename:server.cfg
filename:server.cfg rcon password
filename:settings
filename:settings.py SECRET_KEY
filename:sftp-config.json
filename:sftp.json path:.vscode
filename:shadow
filename:shadow path:etc
filename:spec
filename:sshd_config
filename:tugboat
filename:ventrilo_srv.ini
filename:wp-config
filename:wp-config.php
filename:zhrc
jsforce extension:js conn.login
language:yaml -filename:travis
msg nickserv identify filename:config
path:sites databases password
private -language:java
shodan_api_key language:python<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>其他搜索语法指引：<br>高级搜索：<a target="_blank" rel="noopener" href="https://github.com/search/advanced">https://github.com/search/advanced</a><br>Github高级搜索语法：<a target="_blank" rel="noopener" href="https://docs.github.com/cn/search-github/getting-started-with-searching-on-github/understanding-the-search-syntax?spm=a2c6h.12873639.article-detail.6.55db74b8e8hJQq">https://docs.github.com/cn/search-github/getting-started-with-searching-on-github/understanding-the-search-syntax?spm=a2c6h.12873639.article-detail.6.55db74b8e8hJQq</a><br>Github有着自己的搜索语法，善用搜索语法能发现更多的有用信息。一般来说，Github搜索都是以域名、备案、js路径、网站技术支持等关键内容为主。</p>
<h5 id="自动搜集"><a href="#自动搜集" class="headerlink" title="自动搜集"></a>自动搜集</h5><p>1.GitDorker <a target="_blank" rel="noopener" href="https://github.com/obheda12/GitDorker">https://github.com/obheda12/GitDorker</a><br>GitDorker 是一款github自动信息收集工具，它利用 GitHub 搜索 API 和作者从各种来源编译的大量 GitHub dorks 列表，以提供给定搜索查询的 github 上存储的敏感信息的概述。<br>2.trufflehog <a target="_blank" rel="noopener" href="https://github.com/trufflesecurity/trufflehog">https://github.com/trufflesecurity/trufflehog</a><br>Truffle Hog是一款采用Python开发的工具，它可以检索GitHub代码库的所有代码提交记录以及分支，并搜索出可以表示密钥(例如AWS密钥)的高熵字符串。一般用来探测泄漏密钥的工具，支持扫描的数据源包括git、github、gitlab、S3、文件系统、文件和标准输入。<br>3.GitPrey <code>-k指定关键字</code><br>4.Nuggests<br>5.theHarvester<br>6.GSIL<br>7.Gshark<br>其他检索工具：<br><a target="_blank" rel="noopener" href="https://github.com/BishopFox/GitGot">https://github.com/BishopFox/GitGot</a><br><a target="_blank" rel="noopener" href="https://github.com/UKHomeOffice/repo-security-scanner">https://github.com/UKHomeOffice/repo-security-scanner</a><br><a target="_blank" rel="noopener" href="https://github.com/gwen001/github-search">https://github.com/gwen001/github-search</a><br><a target="_blank" rel="noopener" href="https://github.com/eth0izzle/shhgit">https://github.com/eth0izzle/shhgit</a><br><a target="_blank" rel="noopener" href="https://github.com/lightless233/geye">https://github.com/lightless233/geye</a><br><a target="_blank" rel="noopener" href="https://github.com/cve-search/git-vuln-finder">https://github.com/cve-search/git-vuln-finder</a><br><a target="_blank" rel="noopener" href="https://github.com/Securityautomation/DumpTheGit">https://github.com/Securityautomation/DumpTheGit</a><br><a target="_blank" rel="noopener" href="https://github.com/4x99/code6">https://github.com/4x99/code6</a><br><a target="_blank" rel="noopener" href="https://github.com/tillson/git-hound">https://github.com/tillson/git-hound</a></p>
<h5 id="代码仓库测绘引擎（全网在线搜集）"><a href="#代码仓库测绘引擎（全网在线搜集）" class="headerlink" title="代码仓库测绘引擎（全网在线搜集）"></a>代码仓库测绘引擎（全网在线搜集）</h5><p>1.pinatahub <a target="_blank" rel="noopener" href="https://pinatahub.incognita.tech/">https://pinatahub.incognita.tech</a><br>github敏感信息搜索引擎，有时候github搜索查看不方便，可以直接在这个网站搜索。<br>2.searchcode <a target="_blank" rel="noopener" href="https://searchcode.com/">https://searchcode.com/</a><br>SearchCode从Github、BitBucket、CodePlex、SourceForge、Fedora等代码仓库里筛选了近160亿行开源代码，你能够使用文件扩展、特定代码库名字、URL、正则表达式、特殊字符等过滤器对源代码进行过滤，以便搜到你想要的代码。<br>3.其他仓库<br>GitLab: <a target="_blank" rel="noopener" href="https://about.gitlab.com/">https://about.gitlab.com/</a><br>gitee: <a target="_blank" rel="noopener" href="https://gitee.com/">https://gitee.com/</a><br>csdn：<a target="_blank" rel="noopener" href="https://gitcode.net/explore">https://gitcode.net/explore</a></p>
<h3 id="APP，小程序，公众号，快应用等查询"><a href="#APP，小程序，公众号，快应用等查询" class="headerlink" title="APP，小程序，公众号，快应用等查询"></a>APP，小程序，公众号，快应用等查询</h3><h4 id="APP"><a href="#APP" class="headerlink" title="APP"></a>APP</h4><p>1.七麦数据 <a target="_blank" rel="noopener" href="https://www.qimai.cn/">https://www.qimai.cn/</a><br>通过当前APP查询所属公司的所有APP，通过当前APP查询同开发者应用<br>2.天眼查 <a target="_blank" rel="noopener" href="https://www.tianyancha.com/">https://www.tianyancha.com/</a><br>3.企查查 <a target="_blank" rel="noopener" href="https://www.qcc.com/">https://www.qcc.com/</a><br>4.小蓝本 <a target="_blank" rel="noopener" href="https://www.xiaolanben.com/pc">https://www.xiaolanben.com/pc</a><br>5.点点数据 <a target="_blank" rel="noopener" href="https://app.diandian.com/">https://app.diandian.com/</a><br>6.豌豆荚 获取app历史版本 <a target="_blank" rel="noopener" href="https://www.wandoujia.com/">https://www.wandoujia.com/</a><br>7.AppStore(安卓和IOS)<br>8.零零信安<br>查询同开发者应用</p>
<h4 id="公众号和小程序"><a href="#公众号和小程序" class="headerlink" title="公众号和小程序"></a>公众号和小程序</h4><p>1.企查查<br>2.微信直接搜<br>3.零零信安<br>通过微信搜索公众号并去关注，然后进去点击文章之类的，下拉可以看到它的网页来源，大部分是微信提供的，所以需要去阅读原文，但是原文也可能是第三方提供的，所以还需要自己自行去判断，找到它的url后又可以去爆一波子域名了，随便点击文章通过下拉查看域名</p>
<h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><p>还可以使用wappalyzer这个插件来检查网站使用的组件信息，同时，我们知道这个公司有微信和小程序服务，我们也可以上去看看有没有暴露的域名：<br><img src="/images/InformationGather/hw11-14.JPG"><br><img src="/images/InformationGather/hw11-15.JPG"><br><img src="/images/InformationGather/hw11-16.JPG"><br>报了一些登录口和敏感url，除此之外没有新发现<br>logo：<br>当你不确定目标产品是什么时，比如你不知道他是谁家的WAF或者路由器，可以利用查看网站logo地址，然后复制logo地址，点击按图片搜索，到谷歌里面查询；也可以把目标logo下载下来，利用上传图片来查询，通过搜索出来的结果可以判断目标产品和厂商。<br>favivon.ico<br>首先先来介绍一下什么favicon.ico文件，所谓favicon，便是其可以让浏览器的收藏夹中除显示相应的标题外，还以图标的方式区别不同的网站。favicon.ico也被称为 website icon（网页图标）、page icon（页面图标）或url icon（URL图标），具体细节请问度娘。下面这个小东西就是 Favicon.ico，我们可以通过在shodan里寻找它的哈希并去查找相关资产，打开shodan页面，或者用shodan插件都行</p>
<h3 id="App敏感信息搜集"><a href="#App敏感信息搜集" class="headerlink" title="App敏感信息搜集"></a>App敏感信息搜集</h3><h4 id="手工"><a href="#手工" class="headerlink" title="手工"></a>手工</h4><p>一般是通过抓包收集接口数据或者逆向获取配置数据。<br>抓包可能会需要进行证书绕过、绕过抓包限制等。</p>
<p>常用的软件简记<br>Fastboot &amp; ADB：<a target="_blank" rel="noopener" href="https://developer.android.google.cn/studio/releases/platform-tools?hl=zh_cn">https://developer.android.google.cn/studio/releases/platform-tools?hl=zh_cn</a><br>HttpCanary：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1-4YrEuNYAS_g7o34NO26xg?pwd=p7o3">https://pan.baidu.com/s/1-4YrEuNYAS_g7o34NO26xg?pwd=p7o3</a><br>Packet Capture：<a target="_blank" rel="noopener" href="https://play.google.com/store/apps/details?id=app.greyshirts.sslcapture">https://play.google.com/store/apps/details?id=app.greyshirts.sslcapture</a><br>Wicap：<a target="_blank" rel="noopener" href="https://nalankang.lanzoui.com/b00usn8te">https://nalankang.lanzoui.com/b00usn8te</a><br>Fildder+Burpsuite：<a target="_blank" rel="noopener" href="https://www.telerik.com/fiddler">https://www.telerik.com/fiddler</a>  <a target="_blank" rel="noopener" href="https://portswigger.net/burp">https://portswigger.net/burp</a><br>Mitmproxy：<a target="_blank" rel="noopener" href="https://mitmproxy.org/">https://mitmproxy.org/</a><br>Charles：<a target="_blank" rel="noopener" href="https://www.charlesproxy.com/">https://www.charlesproxy.com/</a><br>Frida：<a target="_blank" rel="noopener" href="https://github.com/frida/frida">https://github.com/frida/frida</a></p>
<p>SSL相关：JustTrustMe++&#x2F;TrustMeAlready&#x2F;SSLUnpinning&#x2F;Inspeckage<br><a target="_blank" rel="noopener" href="https://github.com/JunGe-Y/JustTrustMePP">https://github.com/JunGe-Y/JustTrustMePP</a><br><a target="_blank" rel="noopener" href="https://github.com/ViRb3/TrustMeAlready">https://github.com/ViRb3/TrustMeAlready</a><br><a target="_blank" rel="noopener" href="https://github.com/ac-pm/SSLUnpinning_Xposed">https://github.com/ac-pm/SSLUnpinning_Xposed</a><br><a target="_blank" rel="noopener" href="https://github.com/ac-pm/Inspeckage">https://github.com/ac-pm/Inspeckage</a></p>
<p>强制走代理：ProxyDroid&#x2F;Droni+Burpsuite<br><a target="_blank" rel="noopener" href="https://play.google.com/store/apps/details?id=org.proxydroid&hl=en_SG&gl=US">https://play.google.com/store/apps/details?id=org.proxydroid&amp;hl=en_SG&amp;gl=US</a><br><a target="_blank" rel="noopener" href="https://play.google.com/store/apps/details?id=org.sandrob.drony">https://play.google.com/store/apps/details?id=org.sandrob.drony</a></p>
<p>综合性安卓抓包&#x2F;逆向&#x2F;HOOK自动化脚本工具：lamda&#x2F;r0capture&#x2F;fridaUiTools&#x2F;frida_hook_libart<br><a target="_blank" rel="noopener" href="https://github.com/rev1si0n/lamda">https://github.com/rev1si0n/lamda</a><br><a target="_blank" rel="noopener" href="https://github.com/r0ysue/r0capture">https://github.com/r0ysue/r0capture</a><br><a target="_blank" rel="noopener" href="https://github.com/dqzg12300/fridaUiTools">https://github.com/dqzg12300/fridaUiTools</a><br><a target="_blank" rel="noopener" href="https://github.com/lasting-yang/frida_hook_libart">https://github.com/lasting-yang/frida_hook_libart</a></p>
<p>ecapture旁观者清</p>
<p>逆向可能会需要进行脱壳&#x2F;解码等。<br>常用软件简记<br>幸运破解器：<a target="_blank" rel="noopener" href="https://pan.quark.cn/s/e597d624dd23#/list/share/c978afeb1cdc48ed9e51745006cfea6e-Lucky%20Patcher">https://pan.quark.cn/s/e597d624dd23#/list/share/c978afeb1cdc48ed9e51745006cfea6e-Lucky%20Patcher</a><br>核心破解：<a target="_blank" rel="noopener" href="https://github.com/Xposed-Modules-Repo/com.coderstory.toolkit">https://github.com/Xposed-Modules-Repo/com.coderstory.toolkit</a><br>BlackDex：<a target="_blank" rel="noopener" href="https://github.com/CodingGay/BlackDex">https://github.com/CodingGay/BlackDex</a><br>fdex2：<a target="_blank" rel="noopener" href="https://github.com/CodingGay/BlackDex">https://github.com/CodingGay/BlackDex</a><br>FART：<a target="_blank" rel="noopener" href="https://github.com/hanbinglengyue/FART">https://github.com/hanbinglengyue/FART</a><br>Android Killer：<a target="_blank" rel="noopener" href="https://github.com/liaojack8/AndroidKiller">https://github.com/liaojack8/AndroidKiller</a><br>午夜神大佬应用集：<a target="_blank" rel="noopener" href="https://www.yuque.com/docs/share/c0691a64-3b55-4ae3-ab20-90e1daff12cd">https://www.yuque.com/docs/share/c0691a64-3b55-4ae3-ab20-90e1daff12cd</a></p>
<p>grep筛选</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">grep</span> <span class="token punctuation">\</span>-EHirn <span class="token string">"accesskey|admin|aes|api\_key|apikey|checkClientTrusted|crypt|http:|https:|password|pinning|secret|SHA256|SharedPreferences|superuser|token|X509TrustManager|insert into|setJavaScriptEnabled|root|JavascriptInterface|MODE\_WORLD\_READABLE|MODE\_WORLD\_WRITEABLE|Pinner|checkServerTrusted|api\_secret|api/v1|api/v2"</span> <span class="token punctuation">\</span>--color APKfolder/
<span class="token punctuation">\</span># https://twitter.com/AmitMDubey/status/1272982285277491200<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h4 id="工具-1"><a href="#工具-1" class="headerlink" title="工具"></a>工具</h4><p>MobSF<br><a target="_blank" rel="noopener" href="https://github.com/MobSF/Mobile-Security-Framework-MobSF">https://github.com/MobSF/Mobile-Security-Framework-MobSF</a></p>
<p>AppInfoScanner<br><a target="_blank" rel="noopener" href="https://github.com/kelvinBen/AppInfoScanner">https://github.com/kelvinBen/AppInfoScanner</a><br>一款适用于以HW行动&#x2F;红队&#x2F;渗透测试团队为场景的移动端(Android、iOS、WEB、H5、静态网站)信息收集扫描工具，可以帮助渗透测试工程师、攻击队成员、红队成员快速收集到移动端或者静态WEB站点中关键的资产信息并提供基本的信息输出,如：Title、Domain、CDN、指纹信息、状态信息等。</p>
<p>ApkAnalyser<br><a target="_blank" rel="noopener" href="https://github.com/TheKingOfDuck/ApkAnalyser">https://github.com/TheKingOfDuck/ApkAnalyser</a><br>一键提取安卓应用中可能存在的敏感信息。<br>目前可提取APK内：<br>所有字符串<br>所有URLs<br>所有ip<br>可能是hash值的字符串<br>存在的敏感词（如oss.aliyun）<br>可能是accessKey的值</p>
<h3 id="蜜罐识别"><a href="#蜜罐识别" class="headerlink" title="蜜罐识别"></a>蜜罐识别</h3><p>在进行下一步更深入的探测和入侵之前，我们必须了解对方布下的陷阱情况—-蜜罐 排排雷</p>
<p>通常将蜜罐(honeypot)定义为一种安全资源，它不需要提供实际的应用，蜜罐的存在价值就是诱导和记录攻击行为，从而了解攻击者的入侵方法和手段，并能够延缓其攻击进程，进而根据捕获的攻击行为数据，分析攻击者使用的攻击方法和工具，从而让防御方针对性地增强系统的安全防护能力</p>
<p>简单识别</p>
<p>honeyscore shodan：<a target="_blank" rel="noopener" href="https://honeyscore.shodan.io/">https://honeyscore.shodan.io/</a><br>网络空间搜索引擎</p>
<p>Honeypot Hunter：<a target="_blank" rel="noopener" href="https://send-safe-honeypot-hunter.apponic.com/">https://send-safe-honeypot-hunter.apponic.com/</a><br>Send-Safe Honeypot Hunter 是一种工具，用于检查所谓的“蜜罐”的 HTTPS 和 SOCKS 代理列表。“蜜罐”是由试图通过使用这些虚假代理记录流量，然后向其 ISP 发送投诉的人运行的虚假代理。</p>
<p>Chrome 蜜罐检测插件：<a target="_blank" rel="noopener" href="https://github.com/iiiusky/AntiHoneypot-Chrome-simple">https://github.com/iiiusky/AntiHoneypot-Chrome-simple</a><br>需要自己完善规则的Chrome 蜜罐检测插件</p>
<p>anti-honeypot：<a target="_blank" rel="noopener" href="https://github.com/cnrstar/anti-honeypot">https://github.com/cnrstar/anti-honeypot</a><br>一款可以检测WEB蜜罐并阻断请求的Chrome插件</p>
<p>AntiHoneypot：<a target="_blank" rel="noopener" href="https://github.com/Monyer/antiHoneypot">https://github.com/Monyer/antiHoneypot</a><br>一个拦截XSSI &amp; 识别Web蜜罐的Chrome扩展</p>
<h2 id="主动信息搜集"><a href="#主动信息搜集" class="headerlink" title="主动信息搜集"></a>主动信息搜集</h2><p>在进行了被动信息搜集之后，就可以根据结果有针对性的进行主动侦察了，需要注意的是，主动侦察的动静一般会比较大，有可能会打草惊蛇，所以一定要谨慎</p>
<h3 id="子域名挖掘"><a href="#子域名挖掘" class="headerlink" title="子域名挖掘"></a>子域名挖掘</h3><h4 id="SSL证书反查"><a href="#SSL证书反查" class="headerlink" title="SSL证书反查"></a>SSL证书反查</h4><p>因为证书透明性是开放架构，可以检测由证书颁发机构错误颁发的 SSL 证书，也可以识别恶意颁发证书的证书颁发机构，且任何人都可以构建或访问，CA证书又包含了域名、子域名、邮箱等敏感信息，价值就不言而喻了。<br>可以通过以下网站来查看证书注册相关信息，查找子域名和未暴露资产（使用同一证书的即为同一公司或机构）：<br><a target="_blank" rel="noopener" href="https://crt.sh/">https://crt.sh</a><br><a target="_blank" rel="noopener" href="https://ui.ctsearch.entrust.com/ui/ctsearchui">https://ui.ctsearch.entrust.com/ui/ctsearchui</a>  （包括过期证书，不好用）<br><a target="_blank" rel="noopener" href="https://sslmate.com/ct_search_api/">https://sslmate.com/ct_search_api/</a>  （需要注册，还不错，可以写脚本搜集子域）<br><img src="/images/InformationGather/info2.JPG"><br><a target="_blank" rel="noopener" href="https://searchdns.netcraft.com/">https://searchdns.netcraft.com/</a> （不好用）<br><a target="_blank" rel="noopener" href="https://hackertarget.com/find-dns-host-records/">https://hackertarget.com/find-dns-host-records/</a> （不好用）<br><img src="/images/InformationGather/hw11-12.JPG"><br><img src="/images/InformationGather/hw11-13.JPG"><br>发现几个新的域名</p>
<pre class="line-numbers language-none"><code class="language-none">tbsdev.ylxweb.cn
gitlab.ylxweb.cn
illkx.ylxweb.cn
treayoung.ylxweb.cn<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>命令行查询：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 基于https://opendata.rapid7.com/  项目的搜索，需要注意语句中的时间和目标主域，需注意时间可能会很久，因为数据库很大</span>
<span class="token function">wget</span> https://scans.io/data/rapid7/sonar.fdns<span class="token punctuation">\</span>_v2/20170417-fdns.json.gz
<span class="token function">cat</span> <span class="token number">20170417</span><span class="token punctuation">\</span>-fdns.json.gz <span class="token operator">|</span> pigz <span class="token punctuation">\</span>-dc <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">".target.org"</span> <span class="token operator">|</span> jq<span class="token punctuation">\</span>`<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>在浏览器中可以查看相关证书的详细信息，其中可能含有子域名<br><img src="/images/InformationGather/info1.JPG"><br>有时候https证书报错也会泄露域名</p>
<p>工具：<br><a target="_blank" rel="noopener" href="https://github.com/UnaPibaGeek/ctfr">https://github.com/UnaPibaGeek/ctfr</a><br>自动证书查询</p>
<h4 id="第三方聚合服务"><a href="#第三方聚合服务" class="headerlink" title="第三方聚合服务"></a>第三方聚合服务</h4><p>可以通过第三方网站直接查询子域：<br>1.<a target="_blank" rel="noopener" href="https://www.virustotal.com/gui/home/search">https://www.virustotal.com/gui/home/search</a>  (不好用)<br>2.<a target="_blank" rel="noopener" href="https://dnsdumpster.com/">https://dnsdumpster.com/</a><br>3.<a target="_blank" rel="noopener" href="https://site.ip138.com/">https://site.ip138.com/</a><br>4.<a target="_blank" rel="noopener" href="https://www.threatminer.org/index.php">https://www.threatminer.org/index.php</a>  (不好用)<br>5.<a target="_blank" rel="noopener" href="https://spyse.com/tools/subdomain-finder">https://spyse.com/tools/subdomain-finder</a>  （不好用）<br>6.<a target="_blank" rel="noopener" href="https://www.dnsdb.io/zh-cn/">https://www.dnsdb.io/zh-cn/</a>  （不好用）<br>7.<a target="_blank" rel="noopener" href="https://chaziyu.com/">https://chaziyu.com/</a><br>8.ViewDNS<br>工具：<br><a target="_blank" rel="noopener" href="https://github.com/aboul3la/Sublist3r">https://github.com/aboul3la/Sublist3r</a>  （好用）</p>
<h4 id="自身泄漏"><a href="#自身泄漏" class="headerlink" title="自身泄漏"></a>自身泄漏</h4><p>1.&#x2F;robots.txt<br>2.&#x2F;crossdomain.xml(跨域策略文件cdx)<br>3.从流量中分析提取<br>4.&#x2F;sitemap</p>
<h4 id="网页爬虫（网页信息挖掘）"><a href="#网页爬虫（网页信息挖掘）" class="headerlink" title="网页爬虫（网页信息挖掘）"></a>网页爬虫（网页信息挖掘）</h4><p>1.我们使用正则表达式抓取页面以sina.com.cn结尾的所有的URL（一级深度，即不递归）这个脚本貌似有点问题</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> re
<span class="token keyword">import</span> requests
<span class="token keyword">from</span> pprint <span class="token keyword">import</span> pprint

<span class="token keyword">def</span> <span class="token function">crawl_page</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> domain<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'[*] Crawl URL: &#123;0&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span>
	found_url <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	req <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span>
	content <span class="token operator">=</span> req<span class="token punctuation">.</span>text
	link_list <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r"(?&lt;=href="</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token operator">+</span>?<span class="token punctuation">(</span>?<span class="token operator">=</span><span class="token string">")|(?&lt;=href=').+?(?=')"</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span>
	<span class="token keyword">for</span> url <span class="token keyword">in</span> link_list<span class="token punctuation">:</span>
		result <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'http[s]?://(.*?).sina.com.cn'</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span>
		<span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>
			found_url<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">'&#123;0&#125;.&#123;1&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> domain<span class="token punctuation">)</span><span class="token punctuation">)</span>
	pprint<span class="token punctuation">(</span>found_url<span class="token punctuation">)</span>

<span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">'main'</span><span class="token punctuation">:</span>
	page_url <span class="token operator">=</span> <span class="token string">'http://www.sina.com.cn/'</span>
	main_domain <span class="token operator">=</span> <span class="token string">'sina.com.cn'</span>
	crawl_page<span class="token punctuation">(</span>page_url<span class="token punctuation">,</span> main_domain<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>可以根据这个脚本写自己的爬虫</p>
<p>2.SpiderFoot （已弃用，请尽可能不要在实战中使用，感觉不如自己写爬虫）<br><a target="_blank" rel="noopener" href="https://github.com/smicallef/spiderfoot">https://github.com/smicallef/spiderfoot</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">python3 ./sf.py <span class="token parameter variable">-l</span> <span class="token number">127.0</span>.0.1:5001
proxychains4 python3 <span class="token parameter variable">-m</span> pip <span class="token function">install</span> <span class="token parameter variable">-r</span> requirements.txt --break-system-packages --force-reinstall <span class="token comment"># 解决报错</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>一款开源自动自动化信息搜集工具，集成了dns解析，端口扫描，资产搜集等功能，我们来试一下<br>可以看到，这款工具甚至为我们制作了一个图表，能够快速的梳理资产分布：<br><img src="/images/InformationGather/hw11-6.JPG"><br>美中不足的时，工具对一些无关紧要的域名等信息也做了搜集，导致数据多而杂，需要人工去提取，不过我们也发现了一个之前没有发现的邮箱，还有一个<code>www.ylxweb.cn</code>的域名及其ip，访问发现跟<code>www.ylxweb.com</code>有着相同内容，这下可以确定三个ip的资产了<br>同时，这个工具发现了很多端口，需要进一步排查是否误报，至于报告中的C段，考虑到这是一个小公司，并且已经获取了三个有效资产的ip，姑且视为无效信息<br>3.JSINFO-SCAN<br><a target="_blank" rel="noopener" href="https://github.com/p1g3/JSINFO-SCAN">https://github.com/p1g3/JSINFO-SCAN</a><br>递归爬取域名(netloc&#x2F;domain)，以及递归从JS中获取信息的工具<br>4.URLFinder<br><a target="_blank" rel="noopener" href="https://github.com/pingc0y/URLFinder">https://github.com/pingc0y/URLFinder</a><br>URLFinder是一款用于快速提取检测页面中JS与URL的工具。<br>功能类似于JSFinder，但JSFinder好久没更新了。<br>5.EyeWitness<br><a target="_blank" rel="noopener" href="https://github.com/FortyNorthSecurity/EyeWitness">https://github.com/FortyNorthSecurity/EyeWitness</a><br>Eyewitness可自动查询URL对应网站的截图、RDP服务、Open VNC服务器以及一些服务器title、甚至是可识别的默认凭据等，最终会生成一个详细的html报告</p>
<h4 id="DNS域传送"><a href="#DNS域传送" class="headerlink" title="DNS域传送"></a>DNS域传送</h4><p>当我们向配置不正确的dns服务器发送axfr请求时，dns服务器有可能返回请求域名的所有解析记录，从而能够获取子域名<br>使用命令：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">dig</span> @114.114.114.114 twosmi1e.com axfr

nmap –script dns-zone-transfer –script-args dns-zone-transfer.domain<span class="token operator">=</span>targetdomain <span class="token parameter variable">-p</span> <span class="token number">53</span> <span class="token parameter variable">-Pn</span> <span class="token number">114.114</span>.114.114

<span class="token comment"># python DNS库  </span>
xfr <span class="token operator">=</span> dns.query.xfr<span class="token punctuation">(</span>where<span class="token operator">=</span>server, <span class="token assign-left variable">zone</span><span class="token operator">=</span>self.domain, <span class="token assign-left variable">timeout</span><span class="token operator">=</span><span class="token number">5.0</span>, <span class="token assign-left variable">lifetime</span><span class="token operator">=</span><span class="token number">10.0</span><span class="token punctuation">)</span>  
zone <span class="token operator">=</span> dns.zone.from<span class="token punctuation">\</span>_xfr<span class="token punctuation">(</span>xfr<span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>可结合dns服务器字典尝试域传送，不过爆率不高，建议只用机器跑一次就够了（已写脚本）</p>
<h4 id="子域名爆破"><a href="#子域名爆破" class="headerlink" title="子域名爆破"></a>子域名爆破</h4><p>要说简单粗暴还是子域名枚举爆破，通过不断的拼接字典中的子域名前缀去枚举域名的A记录进行DNS解析，如果成功解析说明子域名存在。如xxx.com拼接前缀test组合成test.xxx.com，再对其进行验证。<br>但是域名如果使用泛解析的话，则会导致所有的域名都能成功解析，使得子域名枚举变得不精准。</p>
<hr>
<p>泛解析：使用通配符 * 来匹配所有的子域名，从而实现所有的子级域名均指向相同网站空间。<br>会存在域名劫持、域名恶意泛解析风险<br>会主站被降权，可能被恶意利用，占用大量流量<br>关于恶意解析：<br><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1494534?from=article.detail.1874625">https://cloud.tencent.com/developer/article/1494534?from=article.detail.1874625</a></p>
<p>混合泛解析：在泛解析的基础上，增加一个限制，使记录可以按照需求进行分类。<br><a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/302/9073">https://cloud.tencent.com/document/product/302/9073</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Q2h1Cg/dnsbrute/blob/v2.0/dict/53683.txt">https://github.com/Q2h1Cg/dnsbrute/blob/v2.0/dict/53683.txt</a></p>
<hr>
<p>那么域名使用了泛解析怎么去解决呢？<br>一般有两种：</p>
<p>1.黑名单ip：<br>通过获取一个不存在的子域名相应解析IP，来记录标记黑名单ip，再爆破字典时，解析到的IP在这个黑名单ip中，则跳过，不存在就继续处理。<br>或是记录相同的，保留一到两个。</p>
<p>2.TTL<br>在权威 DNS 中，泛解析记录的 TTL 肯定是相同的，如果子域名记录相同，但 TTL 不同，那这条记录可以说肯定不是泛解析记录。</p>
<p>3.响应内容<br>牺牲速度，先获取一个绝对不存在域名的响应内容，再遍历获取每个字典对应的子域名的响应内容，通过和不存在域名的内容做相似度比对，来枚举子域名。</p>
<p>枚举爆破常用工具：</p>
<h4 id="subDomainsBrute"><a href="#subDomainsBrute" class="headerlink" title="subDomainsBrute"></a>subDomainsBrute</h4><p><a target="_blank" rel="noopener" href="https://github.com/lijiejie/subDomainsBrute">https://github.com/lijiejie/subDomainsBrute</a><br>老牌DNS爆破工具，稳定快速~<br>暂不支持批量<br>怼泛解析：超过10个域名指向同一IP，则此后发现的其他指向该IP的域名将被丢弃，该方法可能存在误删，但简单有效。</p>
<h4 id="OneForAll"><a href="#OneForAll" class="headerlink" title="OneForAll"></a>OneForAll</h4><p>也是一款集成工具，使用了各种api和爆破等方式来查找子域名，注意运行时请不要使用过高的python版本，会因为库的变更导致错误，在python3.7上测试可以运行<br>使用命令：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">python3 oneforall.py <span class="token parameter variable">--target</span> example.com run<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="/images/InformationGather/hw11-19.JPG"><br>没有什么新的发现</p>
<h4 id="Xary"><a href="#Xary" class="headerlink" title="Xary"></a>Xary</h4><p>由长亭开发的一款扫描器，集成了众多POC和子域名挖掘等功能<br>使用命令：</p>
<pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">xray_windows_64.exe sd -t example.com --ho htmloutput.html<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="/images/InformationGather/hw11-20.JPG"><br>同样没有什么新发现</p>
<h4 id="knock"><a href="#knock" class="headerlink" title="knock"></a>knock</h4><p><a target="_blank" rel="noopener" href="https://github.com/guelfoweb/knock">https://github.com/guelfoweb/knock</a><br>需要virustotal的api<br>支持查询VirusTotal，速度快，结果一般<br>VirusTotal API绕过泛解析</p>
<h4 id="ESD"><a href="#ESD" class="headerlink" title="ESD"></a>ESD</h4><p><a target="_blank" rel="noopener" href="https://github.com/FeeiCN/ESD">https://github.com/FeeiCN/ESD</a><br>收集方法多，爆破速度极快，接口少<br>怼泛解析：基于文本相似度过滤泛解析域名</p>
<h4 id="KSubdomain"><a href="#KSubdomain" class="headerlink" title="KSubdomain"></a>KSubdomain</h4><p>无状态子域名爆破工具<br>使用指令：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">./ksubdomain <span class="token parameter variable">-d</span> example.com <span class="token parameter variable">-full</span> <span class="token parameter variable">-csv</span> <span class="token parameter variable">-o</span> /root/name.csv<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="/images/InformationGather/hw11-21.JPG"><br>结合其他工具，一键子域名搜集验证：<br><a target="_blank" rel="noopener" href="https://cn-sec.com/archives/1178685.html">https://cn-sec.com/archives/1178685.html</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">.subfinder.exe <span class="token parameter variable">-d</span> baidu.com <span class="token parameter variable">-silent</span> <span class="token operator">|</span> .ksubdomain.exe <span class="token function">v</span> <span class="token parameter variable">--silent</span> --only-domain <span class="token parameter variable">--stdin</span> <span class="token operator">|</span> .httpx.exe <span class="token parameter variable">-title</span> <span class="token parameter variable">-td</span> -status-code <span class="token parameter variable">-title</span> -follow-redirects <span class="token parameter variable">-ip</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>没有什么发现</p>
<h4 id="Layer子域名挖掘"><a href="#Layer子域名挖掘" class="headerlink" title="Layer子域名挖掘"></a>Layer子域名挖掘</h4><p>感觉字典挺大的，成也字典败也字典，大字典加上递归扫描，在面对这种只有数个子域名的公司时效率就低了<br><img src="/images/InformationGather/hw11-22.JPG"><br>没有什么新发现</p>
<h4 id="subfinder"><a href="#subfinder" class="headerlink" title="subfinder"></a>subfinder</h4><p><a target="_blank" rel="noopener" href="https://github.com/projectdiscovery/subfinder">https://github.com/projectdiscovery/subfinder</a><br>brew install subfinder<br>Subfinder 是一个子域发现工具，它通过使用被动在线资源来发现网站的有效子域。它具有简单的模块化架构，并针对速度进行了优化。 subfinder 是为只做一件事而构建的——被动子域枚举，它做得很好。</p>
<h4 id="其他工具"><a href="#其他工具" class="headerlink" title="其他工具"></a>其他工具</h4><p>1.FuzSub<br><a target="_blank" rel="noopener" href="https://github.com/DavexPro/FuzSub">https://github.com/DavexPro/FuzSub</a><br>2.fierce<br><a target="_blank" rel="noopener" href="https://github.com/davidpepper/fierce-domain-scanner">https://github.com/davidpepper/fierce-domain-scanner</a><br>3.御剑<br>4.wydomain<br>5.orangescan<br>6.DNSRecon<br>7.K8<br>8.DNSMaper<br>aort subfinder dnsenum dnsmap dnsrecon dnswalk<br>一般来说会先运行fierce以确认所有可能的目标已经被识别，然后运行至少两个集成工具（如dnsenum和dnsrecon）以产生最大的数据量并提供一定程度的交叉验证<br>我尝试了一下感觉没有那么好用，可能这一套会比较适用于国外环境</p>
<h4 id="关于爆破字典准备"><a href="#关于爆破字典准备" class="headerlink" title="关于爆破字典准备"></a>关于爆破字典准备</h4><p>可以参考以下文章：<br><a target="_blank" rel="noopener" href="https://feei.cn/esd/">https://feei.cn/esd/</a><br>这里做简单介绍<br>DNS服务商的字典一般来说最准确有效，如：DNSPod公布的使用最多的子域名：<br><a target="_blank" rel="noopener" href="https://github.com/DNSPod/oh-my-free-data/blob/master/src/dnspod-top2000-sub-domains.txt">https://github.com/DNSPod/oh-my-free-data/blob/master/src/dnspod-top2000-sub-domains.txt</a></p>
<p>普通字典：一些基础组合。<br>单字母：f.feei.cn（大都喜欢短一点的域名，单字符的最为常见）<br>单字母+单数字：s1.feei.cn<br>双字母：sd.feei.cn（大都喜欢业务的首字母缩写）<br>双字母+单数字：ss1.feei.cn<br>双字母+双数字：ss01.feei.cn<br>三字母：<a target="_blank" rel="noopener" href="http://www.feei.cn(部分业务名称为三个字)/">www.feei.cn（部分业务名称为三个字）</a><br>四字母：webp.feei.cn（部分业务名称为四个字）<br>单数字：1.feei.cn<br>双数字：11.feei.cn<br>三数字：666.feei.cn</p>
<p>常用词组：常见的中英文词组。<br>fanyi.feei.cn（中）tranlate.feei.cn（英）<br>huiyuan.feei.cn（中）member.feei.cn（英）<br>tupian.feei.cn（中）picture.feei.cn（英）</p>
<p>爆破工具的字典: 可结合整理过的字典<br><a target="_blank" rel="noopener" href="https://github.com/TheRook/subbrute/blob/master/names_small.txt">https://github.com/TheRook/subbrute/blob/master/names_small.txt</a><br><a target="_blank" rel="noopener" href="https://github.com/lijiejie/subDomainsBrute/blob/master/dict/subnames_full.txt">https://github.com/lijiejie/subDomainsBrute/blob/master/dict/subnames_full.txt</a><br><a target="_blank" rel="noopener" href="https://github.com/Q2h1Cg/dnsbrute/blob/v2.0/dict/53683.txt">https://github.com/Q2h1Cg/dnsbrute/blob/v2.0/dict/53683.txt</a></p>
<h4 id="子域名总结"><a href="#子域名总结" class="headerlink" title="子域名总结"></a>子域名总结</h4><p>总的来说oneforall和Xray会比较好用，如果这几个都没有发现可疑的目标，那么用其他应该也不会有什么效果<br>根据上面的所有扫描结果（包括被动信息搜集）找到总结了几个高价值，高可疑的资产，以下的一些搜集手段将针对这些资产：</p>
<pre class="line-numbers language-none"><code class="language-none">120.76.52.201
tbsdev.ylxweb.cn
gitlab.ylxweb.cn
illkx.ylxweb.cn
treayoung.ylxweb.cn
test.ylxweb.com
wxkfpt.ylxweb.com
sfc.api.ylxweb.com
wxkfpt.te.ylxweb.com
tbs.ylxweb.cn
m.ylxweb.cn
hdcx.66239779.com
work.ylxweb.com
cd.ylxweb.cn
api.ylxweb.com
120.24.174.159 
nb.api.ylxweb.com
static.ylxweb.com
121.207.229.250 
39.108.69.220
119.23.146.168
183.47.114.101<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="IP信息搜集"><a href="#IP信息搜集" class="headerlink" title="IP信息搜集"></a>IP信息搜集</h3><p>用以上的方法，我们搜集到了大量的域名信息和部分ip信息，接下来我们需要搜集更多更详细的ip信息来扩大搜集面</p>
<h4 id="DNS记录查询"><a href="#DNS记录查询" class="headerlink" title="DNS记录查询"></a>DNS记录查询</h4><p>DNS服务器端口： tcp&#x2F;udp 53。<br>常用DNS记录：</p>
<table>
<thead>
<tr>
<th align="center">记录类型</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">A记录</td>
<td align="center">解析到一个ipv4地址</td>
</tr>
<tr>
<td align="center">CNAME记录</td>
<td align="center">解析到另一个域名</td>
</tr>
<tr>
<td align="center">MX记录</td>
<td align="center">电子邮件交换记录</td>
</tr>
<tr>
<td align="center">NS记录</td>
<td align="center">返回解析域名服务器，可用于查看目标域名是否有自建dns服务</td>
</tr>
<tr>
<td align="center">AAAA记录</td>
<td align="center">解析到一个ipv6地址</td>
</tr>
<tr>
<td align="center">SRV记录</td>
<td align="center">标识目标服务</td>
</tr>
<tr>
<td align="center">TXT记录</td>
<td align="center">目标备注说明记录</td>
</tr>
</tbody></table>
<p>可以先尝试查询ns记录看看目标有没有自建dns服务器，如果有，则将自建dns服务器放到<br><a target="_blank" rel="noopener" href="https://hackertarget.com/find-shared-dns-servers/">https://hackertarget.com/find-shared-dns-servers/</a><br>进行查询，然后再查询A记录<br>网站的综合查询建议使用爱站网，站长之家这些<br>我们尝试DNS记录查询，看看域名对应了什么主机，同时也可以根据ip地址反查解析的域名，看看同一台服务器上是否还运行着其他可能较弱的站点，dns查询的平台网上有很多，这里不赘述<br>我们可以使用nslookup命令：<br><img src="/images/InformationGather/hw11-3.JPG"><br>也可以用在线网站：<br><a target="_blank" rel="noopener" href="https://www.itdog.cn/dns/">https://www.itdog.cn/dns/</a><br><img src="/images/InformationGather/hw11-4.JPG"><br><img src="/images/InformationGather/hw11-5.JPG"><br>效果不错，分别访问解析到的两个ip，发现都运行着公司官网，而且是阿里云服务器，看来是有效资产</p>
<h4 id="绕过CDN"><a href="#绕过CDN" class="headerlink" title="绕过CDN"></a>绕过CDN</h4><p>有的网站可能会做cdn防护，将自己的真实ip隐藏起来，我们可以通过一些方法绕过cdn来获取真实ip</p>
<h5 id="判断CDN"><a href="#判断CDN" class="headerlink" title="判断CDN"></a>判断CDN</h5><p>首先，我们要判断该域名是否存在CDN的情况，我们可以去在线CDN查询网站：<a target="_blank" rel="noopener" href="http://ping.chinaz.com/">http://ping.chinaz.com/</a> 。如果查询出的ip数量大于一个的话，则说明该ip地址不是真实的服务器地址。以我的经验来看，如果是2个或者3个，并且这几个地址是同一地区的不同运营商的话，则很有可能这几个地址是服务器的出口地址，该服务器在内网中，通过不同运营商NAT映射供互联网访问，同时采用几个不同的运营商可以负载均衡和热备份。<br>如果是多个ip地址，并且这些ip地址分布在不同地区的话，则基本上可以断定就是采用了CDN了。<br>1.nslookup<br>用了CDN的会返回多个IP地址<br>2.在线查询检测<br><a target="_blank" rel="noopener" href="https://www.cdnplanet.com/tools/cdnfinder/">https://www.cdnplanet.com/tools/cdnfinder/</a><br><a target="_blank" rel="noopener" href="http://tools.bugscaner.com/nslookup/">http://tools.bugscaner.com/nslookup/</a>  （会提示是否cdn）<br><a target="_blank" rel="noopener" href="https://tool.chinaz.com/nslookup">https://tool.chinaz.com/nslookup</a><br>3.多地ping<br>看IP是否一致，如有多个ip，多半上了cdn，在线工具：<br><a target="_blank" rel="noopener" href="http://ping.chinaz.com/">http://ping.chinaz.com/</a><br><a target="_blank" rel="noopener" href="http://ping.aizhan.com/">http://ping.aizhan.com/</a><br><a target="_blank" rel="noopener" href="https://www.itdog.cn/dns">https://www.itdog.cn/dns</a><br><a target="_blank" rel="noopener" href="http://www.webkaka.com/Ping.aspx">http://www.webkaka.com/Ping.aspx</a><br><a target="_blank" rel="noopener" href="https://www.host-tracker.com/v3/check/">https://www.host-tracker.com/v3/check/</a><br>4.IP反查<br>反查IP有多个域名,那IP多半不是真实IP<br>5.cdn历史解析<br><a target="_blank" rel="noopener" href="https://x.threatbook.cn/">https://x.threatbook.cn/</a><br><a target="_blank" rel="noopener" href="http://toolbar.netcraft.com/site_report?url=">http://toolbar.netcraft.com/site_report?url=</a><br><a target="_blank" rel="noopener" href="http://viewdns.info/">http://viewdns.info/</a><br>6.LTM解码法<br>当服务器使用F5 LTM做负载均衡时,通过对set-cookie关键字的解码真实ip也可被获取,例如：Set-Cookie:BIGipServerpool_8.29_8030&#x3D;487098378.24095.0000,先把第一小节的十进制数即487098378取出来,然后将其转为十六进制数1d08880a,接着从后至前,以此取四位数出来,也就是0a.88.08.1d,最后依次把他们转为十进制数10.136.8.29,也就是最后的真实ip。<br>自动化解码工具：<br><a target="_blank" rel="noopener" href="https://github.com/ezelf/f5_cookieLeaks">https://github.com/ezelf/f5_cookieLeaks</a><br>7.vhost碰撞<br>只要字典够强大，数据够多，通过 IP 和子域的碰撞，总会有所收获。<br>在线工具：<br><a target="_blank" rel="noopener" href="https://pentest-tools.com/information-gathering/find-virtual-hosts#">https://pentest-tools.com/information-gathering/find-virtual-hosts#</a></p>
<h5 id="工具-2"><a href="#工具-2" class="headerlink" title="工具"></a>工具</h5><p>CloudFlair<br>项目地址：<a target="_blank" rel="noopener" href="https://github.com/christophetd/CloudFlair">https://github.com/christophetd/CloudFlair</a><br>在线版：<a target="_blank" rel="noopener" href="https://suip.biz/?act=cloudfail">https://suip.biz/?act=cloudfail</a></p>
<h5 id="其他手法"><a href="#其他手法" class="headerlink" title="其他手法"></a>其他手法</h5><p>更全的方法可以看指南：<a target="_blank" rel="noopener" href="https://github.com/bin-maker/BYPASS-CDN">https://github.com/bin-maker/BYPASS-CDN</a><br>1.邮箱地址，如果目标有类似验证码等邮件服务，可以通过查看邮件的源ip来发现真实ip，因为邮件服务器一般不上cdn，大佬分享的奇淫技巧：通过发送邮件给一个不存在的邮箱地址，比如 <a href="mailto:&#x30;&#48;&#x30;&#120;&#x78;&#120;&#64;&#100;&#x6f;&#109;&#97;&#x69;&#x6e;&#46;&#99;&#111;&#x6d;">&#x30;&#48;&#x30;&#120;&#x78;&#120;&#64;&#100;&#x6f;&#109;&#97;&#x69;&#x6e;&#46;&#99;&#111;&#x6d;</a> ，因为该用户不存在，所以发送将失败，并且还会收到一个包含发送该电子邮件给你的服务器的真实 IP 通知。foxmail导出的邮件可以用编辑器打开查看其内容。<br>2.phpinfo文件，phpinfo文件的server_addr字段中可能写有真实的ip地址，测试过程中可以尝试获取这个文件<br>3.分站和子域名，有些网站会用cdn来保护主站，但是没有保护分站<br>4.国外访问获取真实ip地址，有些网站会针对国内ip进行防护，所以使用国外ip访问可以获取真实ip<br>5.域名历史解析记录，有些网站可能之前没有上cdn，解析记录了之前的真实ip<br>6.有的网站有app或小程序等，里面的请求可能是真实ip</p>
<h5 id="真实ip验证和使用"><a href="#真实ip验证和使用" class="headerlink" title="真实ip验证和使用"></a>真实ip验证和使用</h5><p>1.cdn节点判断<br>对于一些cdn节点可以使用阿里云的CDN节点判断验证找到的ip是否为CDN节点：<br><a target="_blank" rel="noopener" href="https://www.alibabacloud.com/help/zh/alibaba-cloud-cdn/latest/query-ip-addresses">https://www.alibabacloud.com/help/zh/alibaba-cloud-cdn/latest/query-ip-addresses</a><br>2.通过浏览器源代码获取功能，确定真实ip<br>使用 view-source:192.168.1.1（填入真实ip），如果是真，则返回网站源代码。<br>如果是假，则返回cdn信息<br>3.组织IP段<br>当目标信息比较笼统时，可以通过IP地址注册信息查询运营商给目标组织所分配的ip段信息，继而对这个段进行测试。这样既可以扩大范围也有可能直接找到CDN后的真实服务器。<br><a target="_blank" rel="noopener" href="https://ipwhois.cnnic.net.cn/">https://ipwhois.cnnic.net.cn/</a><br><a target="_blank" rel="noopener" href="https://apps.db.ripe.net/db-web-ui/query">https://apps.db.ripe.net/db-web-ui/query</a><br><a target="_blank" rel="noopener" href="https://bgp.he.net/">https://bgp.he.net/</a></p>
<p>我们可以通过修改host文件，将域名和真实ip绑定，或者修改burp和yakit的设置来解析以利用真实ip</p>
<h3 id="C段探测"><a href="#C段探测" class="headerlink" title="C段探测"></a>C段探测</h3><p>在收集了一些域名和ip资产后，我们可以根据解析的ip+ip资产的范围去扩大C段的范围<br><img src="/images/InformationGather/hw11-23.JPG"><br>如图我们可以猜测，210.38.250.0&#x2F;24 和 121.10.176.0&#x2F;24 网段中可能有更多未暴露的相关资产，即可将他们列为待扫描的C段<br>一般都是扫C段为主，B段为辅。通过获取同在一个ip段的同类型网站或业务来扩大攻击面，往往同ip段中会存在一些后台、api相关处理服务等。<br>C段主要收集点：<br>ip<br>端口<br>容器类型<br>title</p>
<h4 id="在线查询"><a href="#在线查询" class="headerlink" title="在线查询"></a>在线查询</h4><p>可以先试试在线的网站来查C段：<br><a target="_blank" rel="noopener" href="https://tool.chinaz.com/same">https://tool.chinaz.com/same</a><br><a target="_blank" rel="noopener" href="https://dns.aizhan.com/">https://dns.aizhan.com/</a><br><a target="_blank" rel="noopener" href="https://c.webscan.cc/">https://c.webscan.cc/</a>  （貌似已经死了）<br>这个比较好用，能扫出来很多甚至连测绘引擎都搞不出来的域名，但是会很容易崩溃，而且速度会比较慢，但也是利大于弊，附上部分扫描结果：<br><img src="/images/InformationGather/hw11-37.JPG"></p>
<h4 id="各类测绘引擎和Google-Hacking"><a href="#各类测绘引擎和Google-Hacking" class="headerlink" title="各类测绘引擎和Google Hacking"></a>各类测绘引擎和Google Hacking</h4><p>site:125.125.125.0&#x2F;24<br><a target="_blank" rel="noopener" href="http://cn.bing.com/search?q=ip:111.111.111.111">http://cn.bing.com/search?q=ip:111.111.111.111</a><br>神中神，跟上文讲到的测绘类似，只是要把域名换成我们要探测的响应的C段即可</p>
<h4 id="fscan"><a href="#fscan" class="headerlink" title="fscan"></a>fscan</h4><p>伟大无需多言</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">fscan <span class="token parameter variable">-h</span> <span class="token number">111.111</span>.111.0/24 <span class="token parameter variable">-m</span> all <span class="token parameter variable">-full</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="nmap"><a href="#nmap" class="headerlink" title="nmap"></a>nmap</h4><p>老牌神器，就是速度有点慢，命令如下：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nmap <span class="token parameter variable">-vvv</span> <span class="token parameter variable">-Pn</span> -p- <span class="token number">111.111</span>.111.0/24 <span class="token parameter variable">-n</span> <span class="token parameter variable">-T4</span>

<span class="token comment">#-v 输出详细信息，-v/-vv/-vvv v越多信息越详细 上线3个v  </span>
<span class="token comment">#-Pn 扫描时不用ping  </span>
<span class="token comment">#-p-  扫描所有端口（65535个）。如果不使用 -p- ，nmap 将仅扫描1000个端口，GUI参数不可用  </span>
<span class="token comment">#-n 不做DNS解析  </span>
<span class="token comment">#-T4 设置时间模板,0-5部分做了扫描时间优化，默认3未作优化。4加速扫描又保持一定准确性</span>

nmap <span class="token parameter variable">-v</span> <span class="token parameter variable">-Pn</span> -p- <span class="token parameter variable">--open</span> <span class="token parameter variable">-sV</span> <span class="token number">111.111</span>.111.0/24 <span class="token parameter variable">-n</span> <span class="token parameter variable">-T4</span> --max-scan-delay <span class="token number">10</span> --max-retries <span class="token number">3</span> --min-hostgroup <span class="token number">10</span> <span class="token parameter variable">-oX</span> <span class="token variable">$ip</span>-result-<span class="token punctuation">\</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> +%y-%m-%d-%H-%M-%S<span class="token punctuation">\</span><span class="token variable">`</span></span>.xml <span class="token parameter variable">--script</span><span class="token operator">=</span>dns-zone-transfer,ftp-anon,ftp-proftpd-backdoor,ftp-vsftpd-backdoor,ftp-vuln-cve2010-4221,http-backup-finder,http-cisco-anyconnect,http-iis-short-name-brute,http-put,http-php-version,http-shellshock,http-robots.txt,http-svn-enum,http-webdav-scan,iax2-version,memcached-info,mongodb-info,msrpc-enum,ms-sql-info,mysql-info,nrpe-enum,pptp-version,redis-info,rpcinfo,samba-vuln-cve-2012-1182,smb-vuln-ms08-067,smb-vuln-ms17-010,snmp-info,sshv1,xmpp-info,tftp-enum,teamspeak2-version,ftp-brute,imap-brute,smtp-brute,pop3-brute,mongodb-brute,redis-brute,ms-sql-brute,rlogin-brute,rsync-brute,mysql-brute,pgsql-brute,oracle-sid-brute,oracle-brute,rtsp-url-brute,snmp-brute,svn-brute,telnet-brute,vnc-brute,xmpp-brute
<span class="token comment"># 扫描全端口，并调用各种脚本</span>

nmap <span class="token parameter variable">-vvv</span> <span class="token parameter variable">-Pn</span> <span class="token parameter variable">-p</span> <span class="token number">20,22</span>,23,25,53,69,80-89,443,8440-8450,8080-8089,110,111,137,143,161,389,512,873,1194,1352,1433,1521,1500,1723,2082,2181,2601,3128,3312,3306,3389,3690,4848,5000,5432,5900,5984,6379,7001,7002,7003,7778,8000,8069,8888,9000,9002,9080-9081,9090,9200,10001,10002,11211,27017,50070 <span class="token parameter variable">--open</span> <span class="token parameter variable">-sV</span> <span class="token number">111.111</span>.111.0/24 <span class="token parameter variable">-n</span> <span class="token parameter variable">-T4</span> --max-scan-delay <span class="token number">10</span> --max-retries <span class="token number">3</span> --min-hostgroup <span class="token number">10</span> <span class="token parameter variable">-oX</span> <span class="token variable">$ip</span>-result-<span class="token punctuation">\</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> +%y-%m-%d-%H-%M-%S<span class="token punctuation">\</span><span class="token variable">`</span></span>.xml <span class="token parameter variable">--script</span><span class="token operator">=</span>dns-zone-transfer,ftp-anon,ftp-proftpd-backdoor,ftp-vsftpd-backdoor,ftp-vuln-cve2010-4221,http-backup-finder,http-cisco-anyconnect,http-iis-short-name-brute,http-put,http-php-version,http-shellshock,http-robots.txt,http-svn-enum,http-webdav-scan,iax2-version,memcached-info,mongodb-info,msrpc-enum,ms-sql-info,mysql-info,nrpe-enum,pptp-version,redis-info,rpcinfo,samba-vuln-cve-2012-1182,smb-vuln-ms08-067,smb-vuln-ms17-010,snmp-info,sshv1,xmpp-info,tftp-enum,teamspeak2-version,ftp-brute,imap-brute,smtp-brute,pop3-brute,mongodb-brute,redis-brute,ms-sql-brute,rlogin-brute,rsync-brute,mysql-brute,pgsql-brute,oracle-sid-brute,oracle-brute,rtsp-url-brute,snmp-brute,svn-brute,telnet-brute,vnc-brute,xmpp-brute
<span class="token comment"># 快速扫描常见端口，并调用各种脚本</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="msscan"><a href="#msscan" class="headerlink" title="msscan"></a>msscan</h4><p><a target="_blank" rel="noopener" href="https://github.com/robertdavidgraham/masscan">https://github.com/robertdavidgraham/masscan</a><br>速度快，精确度有待优化</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">masscan -p80,8000-8100 <span class="token number">10.0</span>.0.0/8 <span class="token parameter variable">--rate</span><span class="token operator">=</span><span class="token number">10000</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><a target="_blank" rel="noopener" href="https://github.com/7dog7/masscan_to_nmap">https://github.com/7dog7/masscan_to_nmap</a><br>nmap+msscan缝合怪</p>
<h4 id="Goby"><a href="#Goby" class="headerlink" title="Goby"></a>Goby</h4><p>Goby也是一款不错的工具，集成了服务探测，端口扫描，子域名挖掘等功能：<br><img src="/images/InformationGather/hw11-17.JPG"><br><img src="/images/InformationGather/hw11-18.JPG"></p>
<h4 id="小米饭web查找器"><a href="#小米饭web查找器" class="headerlink" title="小米饭web查找器"></a>小米饭web查找器</h4><p>使用java8运行更佳<br><a target="_blank" rel="noopener" href="https://github.com/Liqunkit/webfinder-next">https://github.com/Liqunkit/webfinder-next</a><br>好用，但是在扫描大量资产时速度堪忧，不过利大于弊，支持扫描多个C段，线程设置，全端口扫描等<br><img src="/images/InformationGather/hw11-35.JPG"></p>
<h4 id="水泽"><a href="#水泽" class="headerlink" title="水泽"></a>水泽</h4><p><a target="_blank" rel="noopener" href="https://github.com/0x727/ShuiZe_0x727">https://github.com/0x727/ShuiZe_0x727</a></p>
<h4 id="ALLin"><a href="#ALLin" class="headerlink" title="ALLin"></a>ALLin</h4><p><a target="_blank" rel="noopener" href="https://github.com/P1-Team/AlliN">https://github.com/P1-Team/AlliN</a></p>
<h4 id="K8CScan"><a href="#K8CScan" class="headerlink" title="K8CScan"></a>K8CScan</h4><p><a target="_blank" rel="noopener" href="https://github.com/k8gege/K8CScan">https://github.com/k8gege/K8CScan</a></p>
<h4 id="Whatweb"><a href="#Whatweb" class="headerlink" title="Whatweb"></a>Whatweb</h4><p>kali自带，跟小米饭差不多，支持多C段，感觉速度会快一点</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 等级分1-4 四种，强度和时间逐渐递增</span>
whatweb <span class="token parameter variable">-v</span> <span class="token parameter variable">-a</span> 等级 域名<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><img src="/images/InformationGather/hw11-36.JPG"><br>感觉除了速度快一点也没比小米饭强多少</p>
<h4 id="各类测绘引擎"><a href="#各类测绘引擎" class="headerlink" title="各类测绘引擎"></a>各类测绘引擎</h4><p>神中神，跟上文讲到的测绘类似，只是要把域名换成我们要探测的响应的C段即可</p>
<h3 id="旁站（ip反查域名）"><a href="#旁站（ip反查域名）" class="headerlink" title="旁站（ip反查域名）"></a>旁站（ip反查域名）</h3><p>一个服务器上存在多个站点，可通过ip查询相应站点，再从相应站点进一步突破获取服务器权限。<br>1.在线平台：<br><a target="_blank" rel="noopener" href="https://www.webscan.cc/">https://www.webscan.cc/</a><br><a target="_blank" rel="noopener" href="https://viewdns.info/reverseip/">https://viewdns.info/reverseip/</a><br><a target="_blank" rel="noopener" href="https://reverseip.domaintools.com/">https://reverseip.domaintools.com/</a><br><a target="_blank" rel="noopener" href="https://tools.ipip.net/ipdomain.php">https://tools.ipip.net/ipdomain.php</a><br><a target="_blank" rel="noopener" href="https://dnslytics.com/">https://dnslytics.com/</a><br>2.测绘引擎<br>3.工具<br><a target="_blank" rel="noopener" href="https://github.com/Sma11New/ip2domain">https://github.com/Sma11New/ip2domain</a><br>水泽<br>nmap<br>goby<br>御剑<br>北极熊扫描器<br>通过手动ping</p>
<h3 id="端口扫描"><a href="#端口扫描" class="headerlink" title="端口扫描"></a>端口扫描</h3><p>在对域名和ip资产的挖掘完成后，我们可以针对部分可能存在弱点，或者情报较少的资产进行端口扫描来发现更多潜在的可能性<br>tips:<br>大批量扫描时建议云上挂代理池进行。<br>查看端口出现频率<br><a target="_blank" rel="noopener" href="https://github.com/laconicwolf/Masscan-to-CSV">https://github.com/laconicwolf/Masscan-to-CSV</a><br>masscan扫描出的端口可以用nmap去确认</p>
<h4 id="在线扫描"><a href="#在线扫描" class="headerlink" title="在线扫描"></a>在线扫描</h4><p><a target="_blank" rel="noopener" href="http://coolaf.com/tool/port">http://coolaf.com/tool/port</a><br>站长之家</p>
<h4 id="fscan-1"><a href="#fscan-1" class="headerlink" title="fscan"></a>fscan</h4><p>伟大无需多言，自带POC检测，可以快速扫描大量ip，先将上面要针对的ip保存到文件，然后适用fscan通过文件读取目标扫描</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">fscan <span class="token parameter variable">-hf</span> ip.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="/images/InformationGather/hw11-23.JPG"><br>目标好像并没有开放除了80和443之外的端口，我们用nmap在试一下</p>
<h4 id="nmap-1"><a href="#nmap-1" class="headerlink" title="nmap"></a>nmap</h4><p>也是一款十分强大的扫描工具，提供了多种扫描方式和极高的自定义程度，还可以通过人工配置来绕过防火墙</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nmap  <span class="token parameter variable">-vv</span> <span class="token parameter variable">-O</span> <span class="token parameter variable">-A</span> <span class="token parameter variable">-sV</span> <span class="token parameter variable">-sS</span> <span class="token parameter variable">-Pn</span> -p0-65535 <span class="token parameter variable">-iL</span> ip.txt <span class="token parameter variable">-oA</span> ylx.xml<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>扫到出来一个mysql，版本还挺低的：<br><img src="/images/InformationGather/hw11-33.JPG"></p>
<p>端口渗透表（仅供参考）：<br>引用下某大佬的端口渗透思路表，可以学习学习下。<br>端口	服务	渗透用途<br>tcp 20,21	FTP	允许匿名的上传下载,爆破,嗅探,win提权,远程执行(proftpd 1.3.5),各类后门(proftpd,vsftp 2.3.4)<br>tcp 22	SSH	可根据已搜集到的信息尝试爆破,v1版本可中间人,ssh隧道及内网代理转发,文件传输等等<br>tcp 23	Telnet	爆破,嗅探,一般常用于路由,交换登陆,可尝试弱口令<br>tcp 25	SMTP	邮件伪造,vrfy&#x2F;expn查询邮件用户信息,可使用smtp-user-enum工具来自动跑<br>tcp&#x2F;udp 53	DNS	允许区域传送,dns劫持,缓存投毒,欺骗以及各种基于dns隧道的远控<br>tcp&#x2F;udp 69	TFTP	尝试下载目标及其的各类重要配置文件<br>tcp 80-89,443,8440-8450,8080-8089	各种常用的Web服务端口	可尝试经典的topn,vpn,owa,webmail,目标oa,各类Java控制台,各类服务器Web管理面板,各类Web中间件漏洞利用,各类Web框架漏洞利用等等……<br>tcp 110	POP3	可尝试爆破,嗅探<br>tcp 111,2049	NFS	权限配置不当<br>tcp 137,139,445	Samba	可尝试爆破以及smb自身的各种远程执行类漏洞利用,如,ms08-067,ms17-010,嗅探等……<br>tcp 143	IMAP	可尝试爆破<br>udp 161	SNMP	爆破默认团队字符串,搜集目标内网信息<br>tcp 389	LDAP	ldap注入,允许匿名访问,弱口令<br>tcp 512,513,514	Linux rexec	可爆破,rlogin登陆<br>tcp 873	Rsync	匿名访问,文件上传<br>tcp 1194	OpenVPN	想办法钓VPN账号,进内网<br>tcp 1352	Lotus	弱口令,信息泄漏,爆破<br>tcp 1433	SQL Server	注入,提权,sa弱口令,爆破<br>tcp 1521	Oracle	tns爆破,注入,弹shell…<br>tcp 1500	ISPmanager	弱口令<br>tcp 1723	PPTP	爆破,想办法钓VPN账号,进内网<br>tcp 2082,2083	cPanel	弱口令<br>tcp 2181	ZooKeeper	未授权访问<br>tcp 2601,2604	Zebra	默认密码zerbra<br>tcp 3128	Squid	弱口令<br>tcp 3312,3311	kangle	弱口令<br>tcp 3306	MySQL	注入,提权,爆破<br>tcp 3389	Windows rdp	shift后门[需要03以下的系统],爆破,ms12-020<br>tcp 3690	SVN	svn泄露,未授权访问<br>tcp 4848	GlassFish	弱口令<br>tcp 5000	Sybase&#x2F;DB2	爆破,注入<br>tcp 5432	PostgreSQL	爆破,注入,弱口令<br>tcp 5900,5901,5902	VNC	弱口令爆破<br>tcp 5984	CouchDB	未授权导致的任意指令执行<br>tcp 6379	Redis	可尝试未授权访问,弱口令爆破<br>tcp 7001,7002	WebLogic	Java反序列化,弱口令<br>tcp 7778	Kloxo	主机面板登录<br>tcp 8000	Ajenti	弱口令<br>tcp 8009	tomcat Ajp	Tomcat-Ajp协议漏洞<br>tcp 8443	Plesk	弱口令<br>tcp 8069	Zabbix	远程执行,SQL注入<br>tcp 8080-8089	Jenkins,JBoss	反序列化,控制台弱口令<br>tcp 9080-9081,9090	WebSphere	Java反序列化&#x2F;弱口令<br>tcp 9200,9300	ElasticSearch	远程执行<br>tcp 11211	Memcached	未授权访问<br>tcp 27017,27018	MongoDB	爆破,未授权访问<br>tcp 50070,50030	Hadoop	默认端口未授权访问<br>端口号	端口说明	渗透思路<br>21&#x2F;69	FTP&#x2F;TFTP：文件传输协议	爆破、内网嗅探<br>22	SSH：远程连接	用户名枚举、爆破<br>23	Telnet：远程连接	爆破、内网嗅探<br>25	SMTP：邮件服务	邮件伪造<br>53	DNS：域名系统	DNS域传送\DNS缓存投毒\DNS欺骗\利用DNS隧道技术刺透防火墙<br>389	LDAP	未授权访问（通过LdapBrowser工具直接连入）<br>443	https服务	OpenSSL 心脏滴血（nmap -sV –script&#x3D;ssl-heartbleed 目标）<br>445	SMB服务	ms17_010远程代码执行<br>873	rsync服务	未授权访问<br>1090&#x2F;1099	Java-rmi	JAVA反序列化远程命令执行漏洞<br>1352	Lotus Domino邮件服务	爆破：弱口令、信息泄漏：源代码<br>1433	MSSQL	注入、SA弱口令爆破、提权<br>1521	Oracle	注入、TNS爆破<br>2049	NFS	配置不当<br>2181	ZooKeeper服务	未授权访问<br>3306	MySQL	注入、爆破、写shell、提权<br>3389	RDP	爆破、Shift后门、CVE-2019-0708远程代码执行<br>4848	GlassFish控制台	爆破：控制台弱口令、认证绕过<br>5000	Sybase&#x2F;DB2数据库	爆破、注入<br>5432	PostgreSQL	爆破弱口令、高权限执行系统命令<br>5632	PcAnywhere服务	爆破弱口令<br>5900	VNC	爆破：弱口令、认证绕过<br>6379	Redis	未授权访问、爆破弱口令<br>7001	WebLogic中间件	反序列化、控制台弱口令+部署war包、SSRF<br>8000	jdwp	JDWP 远程命令执行漏洞（工具）<br>8080&#x2F;8089	Tomcat&#x2F;JBoss&#x2F;Resin&#x2F;Jetty&#x2F;Jenkins	反序列化、控制台弱口令、未授权<br>8161	ActiveMQ	admin&#x2F;admin、任意文件写入、反序列化<br>8069	Zabbix	远程命令执行<br>9043	WebSphere控制台	控制台弱口令https:&#x2F;&#x2F;:9043&#x2F;ibm&#x2F;console&#x2F;logon.jsp、远程代码执行<br>9200&#x2F;9300	Elasticsearch服务	远程代码执行<br>11211	Memcache	未授权访问（nc -vv 目标 11211）<br>27017	MongoDB	未授权访问、爆破弱口令<br>50000	SAP	远程代码执行<br>50070	hadoop	未授权访问<br>端口号	服务	渗透思路<br>21	FTP&#x2F;TFTP&#x2F;VSFTPD	爆破&#x2F;嗅探&#x2F;溢出&#x2F;后门<br>22	ssh远程连接	爆破&#x2F;openssh漏洞<br>23	Telnet远程连接	爆破&#x2F;嗅探&#x2F;弱口令<br>25	SMTP邮件服务	邮件伪造<br>53	DNS域名解析系统	域传送&#x2F;劫持&#x2F;缓存投毒&#x2F;欺骗<br>67&#x2F;68	dhcp服务	劫持&#x2F;欺骗<br>110	pop3	爆破&#x2F;嗅探<br>139	Samba服务	爆破&#x2F;未授权访问&#x2F;远程命令执行<br>143	Imap协议	爆破161SNMP协议爆破&#x2F;搜集目标内网信息<br>389	Ldap目录访问协议	注入&#x2F;未授权访问&#x2F;弱口令<br>445	smb	ms17-010&#x2F;端口溢出<br>512&#x2F;513&#x2F;514	Linux Rexec服务	爆破&#x2F;Rlogin登陆<br>873	Rsync服务	文件上传&#x2F;未授权访问<br>1080	socket	爆破<br>1352	Lotus domino邮件服务	爆破&#x2F;信息泄漏<br>1433	mssql	爆破&#x2F;注入&#x2F;SA弱口令<br>1521	oracle	爆破&#x2F;注入&#x2F;TNS爆破&#x2F;反弹shell2049Nfs服务配置不当<br>2181	zookeeper服务	未授权访问<br>2375	docker remote api	未授权访问<br>3306	mysql	爆破&#x2F;注入<br>3389	Rdp远程桌面链接	爆破&#x2F;shift后门<br>4848	GlassFish控制台	爆破&#x2F;认证绕过<br>5000	sybase&#x2F;DB2数据库	爆破&#x2F;注入&#x2F;提权<br>5432	postgresql	爆破&#x2F;注入&#x2F;缓冲区溢出<br>5632	pcanywhere服务	抓密码&#x2F;代码执行<br>5900	vnc	爆破&#x2F;认证绕过<br>6379	Redis数据库	未授权访问&#x2F;爆破<br>7001&#x2F;7002	weblogic	java反序列化&#x2F;控制台弱口令<br>80&#x2F;443	http&#x2F;https	web应用漏洞&#x2F;心脏滴血<br>8069	zabbix服务	远程命令执行&#x2F;注入<br>8161	activemq	弱口令&#x2F;写文件<br>8080&#x2F;8089	Jboss&#x2F;Tomcat&#x2F;Resin	爆破&#x2F;PUT文件上传&#x2F;反序列化<br>8083&#x2F;8086	influxDB	未授权访问<br>9000	fastcgi	远程命令执行<br>9090	Websphere	控制台爆破&#x2F;java反序列化&#x2F;弱口令<br>9200&#x2F;9300	elasticsearch	远程代码执行<br>11211	memcached	未授权访问<br>27017&#x2F;27018	mongodb	未授权访问&#x2F;爆破<br>端口号	服务	渗透思路<br>20	ftp_data	爆破、嗅探、溢出、后门<br>21	ftp_control	爆破、嗅探、溢出、后门<br>23	telnet	爆破、嗅探<br>25	smtp	邮件伪造<br>53	DNS	DNS区域传输、DNS劫持、DNS缓存投毒、DNS欺骗、深度利用：利用DNS隧道技术刺透防火墙<br>67	dhcp	劫持、欺骗<br>68	dhcp	劫持、欺骗<br>110	pop3	爆破<br>139	samba	爆破、未授权访问、远程代码执行<br>143	imap	爆破<br>161	snmp	爆破<br>389	ldap	注入攻击、未授权访问<br>512	linux r	直接使用rlogin<br>513	linux r	直接使用rlogin<br>514	linux r	直接使用rlogin<br>873	rsync	未授权访问<br>888	BTLINUX	宝塔Linux主机管理后台&#x2F;默认帐户：admin｜默认密码：admin<br>999	PMA	护卫神佩带的phpmyadmin管理后台，默认帐户：root｜默认密码：huweishen.com<br>1080	socket	爆破：进行内网渗透<br>1352	lotus	爆破：弱口令、信息泄露：源代码<br>1433	mssql	爆破：使用系统用户登录、注入攻击<br>1521	oracle	爆破：TNS、注入攻击<br>2049	nfs	配置不当<br>2181	zookeeper	未授权访问<br>3306	mysql	爆破、拒绝服务、注入<br>3389	rdp	爆破、Shift后门<br>4848	glassfish	爆破：控制台弱口令、认证绕过<br>5000	sybase&#x2F;DB2	爆破、注入<br>5432	postgresql	缓冲区溢出、注入攻击、爆破：弱口令<br>5632	pcanywhere	拒绝服务、代码执行<br>5900	vnc	爆破：弱口令、认证绕过<br>5901	vnc	爆破：弱口令、认证绕过<br>5902	vnc	爆破：弱口令、认证绕过<br>6379	redis	未授权访问、爆破：弱口令<br>7001	weblogic	JAVA反序列化、控制台弱口令、控制台部署webshell<br>7002	weblogic	JAVA反序列化、控制台弱口令、控制台部署webshell<br>80	web	常见Web攻击、控制台爆破、对应服务器版本漏洞<br>443	web	常见Web攻击、控制台爆破、对应服务器版本漏洞<br>8080	web｜Tomcat｜..	常见Web攻击、控制台爆破、对应服务器版本漏洞、Tomcat漏洞<br>8069	zabbix	远程命令执行<br>9090	websphere	文件泄露、爆破：控制台弱口令、Java反序列<br>9200	elasticsearch	未授权访问、远程代码执行<br>9300	elasticsearch	未授权访问、远程代码执行<br>11211	memcacache	未授权访问<br>27017	mongodb	爆破、未授权访问<br>27018	mongodb	爆破、未授权访问<br>50070	Hadoop	爆破、未授权访问<br>50075	Hadoop	爆破、未授权访问<br>14000	Hadoop	爆破、未授权访问<br>8480	Hadoop	爆破、未授权访问<br>8088	web	爆破、未授权访问<br>50030	Hadoop	爆破、未授权访问<br>50060	Hadoop	爆破、未授权访问<br>60010	Hadoop	爆破、未授权访问<br>60030	Hadoop	爆破、未授权访问<br>10000	Virtualmin&#x2F;Webmin	服务器虚拟主机管理系统<br>10003	Hadoop	爆破、未授权访问<br>5984	couchdb	未授权访问<br>445	SMB	弱口令爆破，检测是否有ms_08067等溢出<br>1025	111	NFS<br>2082		cpanel主机管理系统登陆 （国外用较多）<br>2083		cpanel主机管理系统登陆 （国外用较多）<br>2222		DA虚拟主机管理系统登陆 （国外用较多）<br>2601		zebra路由<br>2604		zebra路由<br>3128		代理默认端口,如果没设置口令很可能就直接漫游内网了<br>3311		kangle主机管理系统登陆<br>3312		kangle主机管理系统登陆<br>4440		参考WooYun: 借用新浪某服务成功漫游新浪内网<br>6082		参考WooYun: Varnish HTTP accelerator CLI 未授权访问易导致网站被直接篡改或者作为代理进入内网<br>7778		主机控制面板登录<br>8083		主机管理系统 （国外用较多）<br>8649		<br>8888		主机管理系统默认端口<br>9000		fcgi php执行<br>50000	SAP	命令执行</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># WEB端口</span>
<span class="token number">80,81</span>,82,443,5000,7001,7010,7100,7547,7777,7801,8000,8001,8002,8003,8005,8009,8010,8011,8060,8069,8070,8080,8081,8082,8083,8085,8086,8087,8088,8089,8090,8091,8161,8443,8880,8888,8970,8989,9000,9001,9002,9043,9090,9200,9300,9443,9898,9900,9998,10002,50000,50070

<span class="token comment"># 服务器</span>
<span class="token number">21,22</span>,445,3389,5900

<span class="token comment"># 数据库</span>
<span class="token number">1433,1521</span>,3306,6379,11211,27017<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="存活探测"><a href="#存活探测" class="headerlink" title="存活探测"></a>存活探测</h3><p>主动信息搜集到这一步就可以对前期搜集的网址等进行存活探测了，去除掉不可访问的站点，减少无用信息，为下一步指纹搜集和目录扫描做准备<br>信息处理<br>对前期收集到的大量资产域名、ip信息批量进行存活性、title、架构、服务等信息进行验证提取时，可以用一些自动化工具筛选出有价值的数据，从而提高漏洞发现效率。<br>Ehole<br><a target="_blank" rel="noopener" href="https://github.com/EdgeSecurityTeam/EHole">https://github.com/EdgeSecurityTeam/EHole</a><br>EHole是一款对资产中重点系统指纹识别的工具，在红队作战中，信息收集是必不可少的环节，如何才能从大量的资产中提取有用的系统(如OA、VPN、Weblogic…)。EHole旨在帮助红队人员在信息收集期间能够快速从C段、大量杂乱的资产中精准定位到易被攻击的系统，从而实施进一步攻击。</p>
<p>AlliN<br><a target="_blank" rel="noopener" href="https://github.com/P1-Team/AlliN">https://github.com/P1-Team/AlliN</a><br>一个辅助平常渗透测试项目或者攻防项目快速打点的综合工具，由之前写的工具AG3改名而来。是一款轻便、小巧、快速、全面的扫描工具。多用于渗透前资产收集和渗透后内网横向渗透。工具从项目上迭代了一些懒人功能（比如提供扫描资产文件中，可以写绝大部分的各种形式的链接&#x2F;CIDR,并在此基础上可以添加任意端口和路径）</p>
<p>Bufferfly<br><a target="_blank" rel="noopener" href="https://github.com/dr0op/bufferfly">https://github.com/dr0op/bufferfly</a><br>攻防资产处理小工具，对攻防前的信息搜集到的大批量资产&#x2F;域名进行存活检测、获取标题头、语料提取、常见web端口检测、简单中间识别，去重等，便于筛选有价值资产。</p>
<p>HKTools<br><a target="_blank" rel="noopener" href="https://github.com/Security-Magic-Weapon/HKTools">https://github.com/Security-Magic-Weapon/HKTools</a><br>一款辅助安全研发在日常工作中渗透测试、安全研究、安全开发等工作的工具</p>
<p>EyeWitness<br><a target="_blank" rel="noopener" href="https://github.com/FortyNorthSecurity/EyeWitness">https://github.com/FortyNorthSecurity/EyeWitness</a><br>Eyewitness可自动查询URL对应网站的截图、RDP服务、Open VNC服务器以及一些服务器title、甚至是可识别的默认凭据等，最终会生成一个详细的html报告。<br>anew(去重)<br><a target="_blank" rel="noopener" href="https://github.com/tomnomnom/anew">https://github.com/tomnomnom/anew</a><br>好用的去重对比工具</p>
<h3 id="指纹信息"><a href="#指纹信息" class="headerlink" title="指纹信息"></a>指纹信息</h3><p>通过关键特征，去识别出目标指纹信息可以快速了解目标架构信息，调整攻击方向。<br>常见指纹信息：<br>CMS<br>Discuz、织梦、帝国CMS、WordPress、ecshop、蝉知等</p>
<p>前端技术<br>HTML5、jquery、bootstrap、Vue等</p>
<p>开发语言<br>PHP、JAVA、Ruby、Python、C#等</p>
<p>web服务器<br>Apache、Nginx、IIS、lighttpd等</p>
<p>应用服务器：<br>Tomcat、Jboss、Weblogic、Websphere等</p>
<p>操作系统信息<br>Linux、windows等</p>
<p>CDN信息<br>帝联、Cloudflare、网宿、七牛云、阿里云等</p>
<p>WAF信息<br>创宇盾、宝塔、安全狗、D盾、玄武盾等。</p>
<p>其他组件信息<br>fastjson、shiro、log4j等<br>OA协议办公</p>
<h4 id="服务器类型"><a href="#服务器类型" class="headerlink" title="服务器类型"></a>服务器类型</h4><p>通过ping命令根据回显中的ttl值来判断是win还是linux，但值可被修改精准度不高。默认Linux是64，win是128<br>页面回显、报错回显、header头等站点泄露的系统信息<br>采用 nmap 进行扫描， -O 和 -A 参数都能扫描出来</p>
<p>检测服务器平台、版本等，获取后可以制定漏洞挖掘方案（如IIS6.0存在解析漏洞等）。<br>将首页或者其他页面通过修改大小写辨别网站所使用的系统：<br>区分大小写（页面报错）–Linux<br>不区分大小写（页面正常）–Windows</p>
<p><a target="_blank" rel="noopener" href="http://www.yunsee.cn/">http://www.yunsee.cn/</a><br>根据IIS版本判断Windows系统，系统对应版本通过搜索引擎查找。<br>注：使用AppScan、WVS等扫描工具也可以判断。</p>
<h4 id="开发语言"><a href="#开发语言" class="headerlink" title="开发语言"></a>开发语言</h4><p>通过爬虫获取动态链接然后进行正则匹配判断<br>header头中X-Powered-By信息<br>Set-Cookie特征信息<br>如包含PHPSSIONID说明是php、包含JSESSIONID说明是java、包含ASP.NET_SessionId说明是aspx。</p>
<h4 id="容器中间件类型"><a href="#容器中间件类型" class="headerlink" title="容器中间件类型"></a>容器中间件类型</h4><p>知道了这些信息之后，我们就需要知道网站用的web服务器是什么类型的：Apache、Nginx、Tomcat 还是 IIS。知道了web服务器是哪种类型后，我们还要探测web服务器具体的版本。比如Ngnix版本&lt;0.83会有解析漏洞 ，IIS6.0会有文件名解析漏洞、IIS7.0会有畸形解析漏洞等。不同的web服务器版本，存在着不同漏洞。</p>
<p>搭建网站的服务组件，例如：iis、Apache、nginx、tomcat等，通过网站容器判断存在的漏洞（如：Apache解析漏洞，nginx解析漏洞）。</p>
<h4 id="脚本类型"><a href="#脚本类型" class="headerlink" title="脚本类型"></a>脚本类型</h4><p>我们需要知道网站用的脚本类型：php 、Jsp 、Asp 、Aspx 。<br>1）可以根据网站URL来判断<br>2）site:xxx filetype:php<br>3）可以根据Firefox的插件来判断（Wappalyzer）</p>
<p>通过修改首页文件后缀查看页面响应判断<br>通过修改index.xxx后缀内容（为ASP\ASPX\PHP\JSP），查看页面返回情况，页面返回正常便可以判断脚本类型，判断脚本类型是信息收集中最基本的工作之一。</p>
<p>通过搜索框查找相关文章辨别脚本类型<br>在网站搜索框中输入任意字符，查询后，通过浏览器上的URL判断网站脚本类型。</p>
<p>通过爬虫工具爬取网站目录判断网站脚本类型<br>Webrobot</p>
<h4 id="数据库类型"><a href="#数据库类型" class="headerlink" title="数据库类型"></a>数据库类型</h4><p>我们需要知道网站用的是哪种类型的数据库：Mysql、Oracle、SqlServer 还是 Access 。虽然这几种数据库的语法大体上相同，但是还是有区别的。所以我们还是要知道目标网站用的是哪种数据库，并且数据库是哪个版本的<br>各端口对应数据库类型：<br>sql server–1433<br>oracle–1521<br>mysql–3306<br>postgresql–5432<br>access–默认不开放连接端口，数据库存储在FTP服务器上。</p>
<p>通常情况：access–asp mysql–php oracle–jsp sqlserver–aspx<br>postgresql–php，常见搭配：<br>ASP 和 ASPX：ACCESS、SQL Server<br>PHP：MySQL、PostgreSQL<br>JSP：Oracle、MySQL<br>端口扫描判断数据库类型的方法较为准确，但是管理员也可能选择不开放外网数据库端口，开放内网的数据库端口，也有些管理员喜欢使用站库分离的方法或者使用WAF进行拦截端口扫描来防护站点，这样我们通过端口扫描判断数据库类型的方法便有些失效了。</p>
<h4 id="WAF检测"><a href="#WAF检测" class="headerlink" title="WAF检测"></a>WAF检测</h4><p>常见的waf分类<br>云waf<br>百度安全宝、阿里云盾、长亭雷池等<br>硬件waf<br>绿盟的、深信服的<br>软件waf<br>安全狗、D盾、云锁等<br>代码级waf<br>自己写的waf规则，防止出现注入等，一般是在代码里面写死的（这里是一般情况）<br>常见的waf拦截页面（83个国内外WAF）<br>常见的WAF拦截页面可以参考下某大佬总结的WAF一图流：<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1872310">https://cloud.tencent.com/developer/article/1872310</a><br>真的全是图<br><a target="_blank" rel="noopener" href="https://github.com/stamparm/identYwaf/tree/master/screenshots">https://github.com/stamparm/identYwaf/tree/master/screenshots</a><br>图源如上 可以尝试网页截图相似度匹配（ai）<br>哦 有人写了 <a target="_blank" rel="noopener" href="https://github.com/stamparm/identywaf">https://github.com/stamparm/identywaf</a></p>
<h5 id="工具-3"><a href="#工具-3" class="headerlink" title="工具"></a>工具</h5><p>判断安全狗、阿里云云盾、360网站卫士、护卫神等WEB应用程序防火墙，便于采取绕过WAF的办法。<br>WhatWaf：<a target="_blank" rel="noopener" href="https://github.com/Ekultek/WhatWaf">https://github.com/Ekultek/WhatWaf</a><br>Nmap探测WAF有两种脚本。<br>一种是http-waf-detect。<br>命令：nmap -p80,443 –script&#x3D;http-waf-detect ip<br>一种是http-waf-fingerprint。<br>命令：nmap -p80,443 –script&#x3D;http-waf-fingerprint ip<br>使用wafw00f工具识别waf：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wafw00f <span class="token parameter variable">-i</span> url.txt <span class="token comment"># 批量扫描文件中的url</span>
wafw00f <span class="token parameter variable">-a</span> 域名 <span class="token comment"># 单个网址</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h5 id="手工（下策）"><a href="#手工（下策）" class="headerlink" title="手工（下策）"></a>手工（下策）</h5><p>手动检测是拦截页面或者HTTP可识别字段，一般直接输入敏感字段触发拦截规则库就行，如XSS、SQL payload<br>在搜索框中输入XSS弹窗代码<code>&lt;script&gt;alert(&#39;XSS&#39;)&lt;/script&gt;</code>，WAF拦截后判断WAF<br>在可能存在的注入页面输入检测注入漏洞代码<code>and 1=2</code>，被WAF拦截后判断WAF。<br><img src="/images/InformationGather/hw11-29.JPG"><br>结果以下站点可能有waf：</p>
<pre class="line-numbers language-none"><code class="language-none">http:&#x2F;&#x2F;cd.ylxweb.cn&#x2F;adminweb&#x2F;login
http:&#x2F;&#x2F;tbs.ylxweb.cn&#x2F; <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h4 id="CMS或其他系统指纹识别"><a href="#CMS或其他系统指纹识别" class="headerlink" title="CMS或其他系统指纹识别"></a>CMS或其他系统指纹识别</h4><p>开源指纹库：<a target="_blank" rel="noopener" href="https://github.com/AliasIO/wappalyzer/tree/master/src/technologies">https://github.com/AliasIO/wappalyzer/tree/master/src/technologies</a><br>指纹识别可以帮助我们更好地了解目标运行的服务</p>
<h5 id="CMS识别思路"><a href="#CMS识别思路" class="headerlink" title="CMS识别思路"></a>CMS识别思路</h5><p>特定文件的MD5</p>
<p>一般来说，网站的特定图标、js、css等静态文件不会去修改，通过爬虫对这些文件进行抓取并与规则库中md5值做对比，如果一致就是同一CMS。这种情况不排除会出现二开导致的误报，但速度较快。<br>页面关键字</p>
<p>正则匹配关键字或报错信息判断。如Powered by Discuz、dedecms等、tomcat报错页面<br>请求头信息关键字<br>通过匹配http响应包中的banner信息来识别。<br>如：<br>X-Powered-By字段<br>Cookies 特征<br>Server信息<br>WWW-Authenticate<br>Meta特征<br> ……</p>
<p>url关键字<br>将url中存在路由、robots.txt、爬虫结果与规则库做对比分析来判断是否使用了某CMS<br>如：<br>wordpress默认存在目录：wp-includes、wp-admin<br>织梦默认管理后台：dede<br>帝国常用目录：login&#x2F;loginjs.php<br>weblogic常用目录：wls-wsat<br>jboss常用目录：jmx-console</p>
<p>在线平台：<br><a target="_blank" rel="noopener" href="https://www.yunsee.cn/">https://www.yunsee.cn/</a>  （不好用）<br><a target="_blank" rel="noopener" href="https://fp.shuziguanxing.com/#/">https://fp.shuziguanxing.com/#/</a><br><a target="_blank" rel="noopener" href="https://www.whatweb.net/">https://www.whatweb.net/</a><br><a target="_blank" rel="noopener" href="https://scan.top15.cn/web/">https://scan.top15.cn/web/</a><br><a target="_blank" rel="noopener" href="https://www.wappalyzer.com/">https://www.wappalyzer.com/</a></p>
<h5 id="Wappalyzer"><a href="#Wappalyzer" class="headerlink" title="Wappalyzer"></a>Wappalyzer</h5><p>逐个访问目标站点，可以看到返回了一些服务的信息：<br><img src="/images/InformationGather/hw11-30.JPG"></p>
<h5 id="EHole"><a href="#EHole" class="headerlink" title="EHole"></a>EHole</h5><p><a target="_blank" rel="noopener" href="https://github.com/EdgeSecurityTeam/EHole">https://github.com/EdgeSecurityTeam/EHole</a><br>可以本地还可以fofa</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Ehole finger <span class="token parameter variable">-l</span> <span class="token punctuation">..</span><span class="token punctuation">\</span>wafurl.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="/images/InformationGather/hw11-31.JPG"><br>还不错，如果上fofa估计会更好</p>
<h5 id="Glass"><a href="#Glass" class="headerlink" title="Glass"></a>Glass</h5><p><a target="_blank" rel="noopener" href="https://github.com/s7ckTeam/Glass">https://github.com/s7ckTeam/Glass</a><br>针对资产列表的快速指纹识别工具</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">python Glass.py <span class="token parameter variable">-w</span> wafurl.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="/images/InformationGather/hw11-32.JPG"><br>还可以</p>
<h5 id="长亭Xapp"><a href="#长亭Xapp" class="headerlink" title="长亭Xapp"></a>长亭Xapp</h5><p>github地址：<br><a target="_blank" rel="noopener" href="https://github.com/chaitin/xray/releases?q=xapp">https://github.com/chaitin/xray/releases?q=xapp</a><br>指纹库：<br><a target="_blank" rel="noopener" href="https://github.com/chaitin/xray-plugins">https://github.com/chaitin/xray-plugins</a><br>下载后运行一次，会在<code>C:\Users\username\.xray\xapp</code>生成一些文件，此时我们需要进入这个目录添加配置文件：</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">xapp</span><span class="token punctuation">:</span> <span class="token important">&amp;xapp</span>
  <span class="token key atrule">concurrent</span><span class="token punctuation">:</span> <span class="token number">100</span>
  <span class="token key atrule">workflow</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> scan
      <span class="token key atrule">base</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> util<span class="token punctuation">-</span>target<span class="token punctuation">-</span>split
        <span class="token punctuation">-</span> util<span class="token punctuation">-</span>get<span class="token punctuation">-</span>env
        <span class="token punctuation">-</span> detect<span class="token punctuation">-</span>url
        <span class="token punctuation">-</span> detect<span class="token punctuation">-</span>website
        <span class="token punctuation">-</span> list<span class="token punctuation">-</span>enable
        <span class="token punctuation">-</span> fingerprint
        <span class="token punctuation">-</span> util<span class="token punctuation">-</span>reminder
      <span class="token key atrule">output</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">"event.website"</span> <span class="token punctuation">]</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> output
      <span class="token key atrule">base</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> util<span class="token punctuation">-</span>result<span class="token punctuation">-</span>printer
      <span class="token key atrule">input</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">"event.website"</span> <span class="token punctuation">]</span>

<span class="token key atrule">strategies</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">&lt;&lt;</span><span class="token punctuation">:</span> <span class="token important">*xapp</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> l1
    <span class="token key atrule">description</span><span class="token punctuation">:</span> 我的自定义命令
    <span class="token key atrule">path</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> g<span class="token punctuation">:</span>C<span class="token punctuation">:</span>\Users\username\.xray\xapp\plugins<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>然后将指纹库<code>finger/ehole</code>下的所有yml文件直接复制到<code>xapp/plugins</code>插件目录下，然后运行：</p>
<pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">xapp -t https:&#x2F;&#x2F;example.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>即可自动使用加载的所有指纹，并且这个工具已经集成了EHole，长亭出品还是很不错的<br>附图：<br><img src="/images/InformationGather/hw11-38.JPG"></p>
<h5 id="Finger"><a href="#Finger" class="headerlink" title="Finger"></a>Finger</h5><p>文章就说的很厉害，但实际用起来感觉也就那样，可能是我不会用吧<br>下载安装：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/EASY233/Finger.git
pip3 <span class="token function">install</span> <span class="token parameter variable">-r</span> requirements.txt
python3 Finger.py <span class="token parameter variable">-h</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>附图：<br><img src="/images/InformationGather/hw11-39.JPG"></p>
<h5 id="其他工具-1"><a href="#其他工具-1" class="headerlink" title="其他工具"></a>其他工具</h5><p>御剑Web指纹识别<br>WhatWeb<br>Test404轻量CMS指纹识别<br>椰树<br>WTFScan<br>Kscan：<a target="_blank" rel="noopener" href="https://github.com/lcvvvv/kscan">https://github.com/lcvvvv/kscan</a><br>CMSeeK：<a target="_blank" rel="noopener" href="https://github.com/Tuhinshubhra/CMSeeK">https://github.com/Tuhinshubhra/CMSeeK</a><br>CMSmap：<a target="_blank" rel="noopener" href="https://github.com/Dionach/CMSmap">https://github.com/Dionach/CMSmap</a><br>ACMSDiscovery：<a target="_blank" rel="noopener" href="https://github.com/aedoo/ACMSDiscovery">https://github.com/aedoo/ACMSDiscovery</a><br>TideFinger：<a target="_blank" rel="noopener" href="https://github.com/TideSec/TideFinger">https://github.com/TideSec/TideFinger</a><br>AngelSword：<a target="_blank" rel="noopener" href="https://github.com/Lucifer1993/AngelSword">https://github.com/Lucifer1993/AngelSword</a></p>
<h3 id="目录扫描"><a href="#目录扫描" class="headerlink" title="目录扫描"></a>目录扫描</h3><p>目录扫描跟字典有很大关系，注意403等目录的递归扫描，准备各种fuzz字典（api等）</p>
<p>常见的敏感目录及文件，会对渗透突破有着很大作用，收集思路一般是爬虫采集、递归扫描、Google Hacking。<br>常见敏感目录及文件</p>
<p>备份文件：<a target="_blank" rel="noopener" href="http://www.zip、www.rar、blog.gm7.org.zip等/">www.zip、www.rar、blog.gm7.org.zip等</a><br>代码仓库：.git、.svn等<br>敏感、隐藏api接口：&#x2F;swagger-ui.html、&#x2F;env等<br>站点配置文件：crossdomain.xml、sitemap.xml、security.txt等<br>robots文件<br>网站后台管理页面<br>文件上传&#x2F;下载界面<br>…</p>
<p>tips:<br>扫描核心主要在于字典价值<br>403、404页面可能会存在一些信息，可以多fuzz下。<br>工具使用时善于关键字过滤，将会减少一些误报。</p>
<h4 id="字典推荐"><a href="#字典推荐" class="headerlink" title="字典推荐"></a>字典推荐</h4><p>字典推荐<br>fuzzDicts<br>庞大的Web Pentesting Fuzz 字典，部分精准度不错，可惜更新是2021的时候了。</p>
<p>Web-Fuzzing-Box<br>Web Fuzzing Box - Web 模糊测试字典与一些Payloads，主要包含：弱口令暴力破解、目录以及文件枚举、Web漏洞…</p>
<p>字典运用于实战案例：<a target="_blank" rel="noopener" href="https://gh0st.cn/archives/2019-11-11/1">https://gh0st.cn/archives/2019-11-11/1</a></p>
<p>XXE 暴力枚举字典：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/7kUFx6VpCgNVomQ_e6H6HA">https://mp.weixin.qq.com/s/7kUFx6VpCgNVomQ_e6H6HA</a><br>源地址：<a target="_blank" rel="noopener" href="https://gist.github.com/honoki/d7035c3ccca1698ec7b541c77b9410cf">https://gist.github.com/honoki/d7035c3ccca1698ec7b541c77b9410cf</a></p>
<h4 id="dirsearch"><a href="#dirsearch" class="headerlink" title="dirsearch"></a>dirsearch</h4><p>比较不错，使用命令：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">python dirsearch.py <span class="token parameter variable">-u</span> example.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>扫出来一些可能有操作空间的点：</p>
<pre class="line-numbers language-none"><code class="language-none">https:&#x2F;&#x2F;static.ylxweb.com&#x2F;README.md
https:&#x2F;&#x2F;static.ylxweb.com&#x2F;admin.html
https:&#x2F;&#x2F;work.ylxweb.com&#x2F;svn
http:&#x2F;&#x2F;hdcx.66239779.com&#x2F;admin_login.html
http:&#x2F;&#x2F;tbs.ylxweb.cn&#x2F;

http:&#x2F;&#x2F;cd.ylxweb.cn&#x2F;robots.txt
http:&#x2F;&#x2F;cd.ylxweb.cn&#x2F;web
http:&#x2F;&#x2F;cd.ylxweb.cn&#x2F;adminweb&#x2F;login
http:&#x2F;&#x2F;cd.ylxweb.cn&#x2F;admin.html
http:&#x2F;&#x2F;cd.ylxweb.cn&#x2F;admin2.html
http:&#x2F;&#x2F;cd.ylxweb.cn&#x2F;admin_login.html
https:&#x2F;&#x2F;m.ylxweb.cn&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/images/InformationGather/hw11-24.JPG"><br><img src="/images/InformationGather/hw11-25.JPG"><br><img src="/images/InformationGather/hw11-26.JPG"></p>
<h4 id="Xray"><a href="#Xray" class="headerlink" title="Xray"></a>Xray</h4><p>使用指令：</p>
<pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">xray_windows_amd64.exe ws --basic-crawler https:&#x2F;&#x2F;example.com --html-output vuln.html<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>集成了很多常见的poc和目录扫描等功能，一般来说应该挺好用，但是没发现什么新东西</p>
<h4 id="Dirb"><a href="#Dirb" class="headerlink" title="Dirb"></a>Dirb</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">dirb http://example.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>可以递归扫描，自定义程度高，这里扫出来一些二层目录，但是实际访问报403：<br><img src="/images/InformationGather/hw11-27.JPG"></p>
<h4 id="其他工具-2"><a href="#其他工具-2" class="headerlink" title="其他工具"></a>其他工具</h4><p>feroxbuster：<a target="_blank" rel="noopener" href="https://github.com/epi052/feroxbuster">https://github.com/epi052/feroxbuster</a><br>用Rust编写的快速，简单，递归的内容发现工具<br>yjdirscan：<a target="_blank" rel="noopener" href="https://github.com/foryujian/yjdirscan">https://github.com/foryujian/yjdirscan</a><br>御剑目录扫描专业版<br><a target="_blank" rel="noopener" href="https://github.com/7kbstorm/7kbscan-WebPathBrute">https://github.com/7kbstorm/7kbscan-WebPathBrute</a><br>dirbuster<br>御剑等</p>
<h4 id="后台查找"><a href="#后台查找" class="headerlink" title="后台查找"></a>后台查找</h4><p>·1弱口令默认后台：admin，admin&#x2F;login.asp，manage，login.asp等等常见后台</p>
<p>·2查看网页的链接；一般来说，网站的主页有管理登陆类似的东西，大多数在网站底部版权处或鲁在冒页导肌程等，有些可能被管理员删掉</p>
<p>·3查看网站图片的属性有可能图片是上传大管理后台目录，但是是在前台显示</p>
<p>·4查看网站使用的管理系统，从而确定后台</p>
<p>·5用工具查找：wwwscan，intellitamper，御剑，进行爬虫、字典穷举扫描</p>
<p>·6robots.txt的帮助：robots.txt文件告诉蜘蛛程序在服务器上什么样的文件可以被查看</p>
<p>·7 GoogleHacker通过语法查找后台</p>
<p>·8查看网站使用的编辑器是否有默认后台，FCK、ewb等默认后台</p>
<p>·9短文件利用短文件漏洞进行猜解</p>
<p>·10、子域名有可能管理后台为admin.xxxxx.com、login.xxxxx.com</p>
<p>·11sqlmap-sql-shell load_file（’d:&#x2F;wwroot&#x2F;index.php’）；利用sql注入查看文件源码获取后台</p>
<p>·12社工、XSS利用社会工程系获取后台，利用存储型XSs获取后台<br>根据目录扫描的结果，又筛选了一些可疑的点：</p>
<pre class="line-numbers language-none"><code class="language-none">登录口：
http:&#x2F;&#x2F;cd.ylxweb.cn&#x2F;adminweb&#x2F;login
http:&#x2F;&#x2F;cd.ylxweb.cn&#x2F;admin.html
http:&#x2F;&#x2F;cd.ylxweb.cn&#x2F;admin_login.html
https:&#x2F;&#x2F;m.ylxweb.cn&#x2F;admin.html
https:&#x2F;&#x2F;m.ylxweb.cn&#x2F;admin_login.html
https:&#x2F;&#x2F;m.ylxweb.cn&#x2F;adminweb&#x2F;login
http:&#x2F;&#x2F;hdcx.66239779.com&#x2F;admin_login.html
http:&#x2F;&#x2F;tbs.ylxweb.cn&#x2F;
https:&#x2F;&#x2F;www.ylxweb.com&#x2F;admin_login_wap.html
https:&#x2F;&#x2F;www.ylxweb.com&#x2F;admin_login.html
https:&#x2F;&#x2F;www.ylxweb.com&#x2F;admin_login_pc.html

信息泄露：
https:&#x2F;&#x2F;work.ylxweb.com&#x2F;svn
https:&#x2F;&#x2F;static.ylxweb.com&#x2F;README.md

其他可疑：
https:&#x2F;&#x2F;static.ylxweb.com&#x2F;admin.html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="其他工具-3"><a href="#其他工具-3" class="headerlink" title="其他工具"></a>其他工具</h4><p>还尝试了dirmap，gobuster和dirbuster这几款工具，其中dirmap有很高的自定义性，而剩下两个比较依靠字典</p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>比较推荐使用dirsearch，xray，dirb和dirmap这几款工具来做目录扫描，需要注意的是，目录扫描后的结果需要自己人工查看去过滤打点</p>
<h3 id="JS信息搜集"><a href="#JS信息搜集" class="headerlink" title="JS信息搜集"></a>JS信息搜集</h3><p>js文件一般用于帮助网站执行某些功能，存储着客户端代码，可能会存在大量的敏感信息，通过阅读分析可能会找到宝藏。<br>JS信息查找方法</p>
<ol>
<li><p>手工<br>通过查看页面源代码信息，找到.js后筛选特定信息，但这种方法费时费力，一般网站都会存在大量的js文件，还多数为混淆后的信息。<br>关键信息查找可以使用浏览器自带的全局搜索如通过path:来查Vue框架路由</p>
</li>
<li><p>半自动<br>通过抓包拦截获取url后使用脚本筛选，比如Burp Suite专业版，可以在Target &gt; sitemap下，选中目标网站选中Engagement tools -&gt; Find scripts，找到网站所有脚本内容。<br>也可以使用Copy links in selected items复制出选中脚本项目中所包含的URL链接。<br>粘贴下，然后就可以手工验证url信息价值，有时候可以发现一些未授权、敏感的api接口或者一些GitHub仓库、key值等。<br>这种方法因为结合手工，在一些深层目录架构中，通过Burp Suite script可以获取到一些工具跑不到的js信息。</p>
</li>
<li><p>工具：<br>findsomething插件和findsomething扫描版，js逆向</p>
</li>
</ol>
<p>PackerFuzzer webpack扫描工具</p>
<p>JSFinder：<a target="_blank" rel="noopener" href="https://github.com/Threezh1/JSFinder">https://github.com/Threezh1/JSFinder</a><br>JSFinder是一款用作快速在网站的js文件中提取URL，子域名的工具</p>
<p>JSINFO-SCAN：<a target="_blank" rel="noopener" href="https://github.com/p1g3/JSINFO-SCAN">https://github.com/p1g3/JSINFO-SCAN</a><br>递归爬取域名(netloc&#x2F;domain)，以及递归从JS中获取信息的工具</p>
<p>URLFinder：<a target="_blank" rel="noopener" href="https://github.com/pingc0y/URLFinder">https://github.com/pingc0y/URLFinder</a><br>URLFinder是一款用于快速提取检测页面中JS与URL的工具。<br>功能类似于JSFinder，但JSFinder好久没更新了。</p>
<p>HAE：<a target="_blank" rel="noopener" href="https://github.com/gh0stkey/HaE">https://github.com/gh0stkey/HaE</a><br>HaE是基于 BurpSuite Java插件API 开发的请求高亮标记与信息提取的辅助型框架式插件，该插件可以通过自定义正则的方式匹配响应报文或请求报文，并对满足正则匹配的报文进行信息高亮与提取。如匹配敏感信息、提取页面中的链接信息等。</p>
<p>Repo-supervisor：<a target="_blank" rel="noopener" href="https://github.com/auth0/repo-supervisor#">https://github.com/auth0/repo-supervisor#</a><br>Repo-supervisor 是一种工具，可帮助您检测代码中的秘密和密码。<br>command-line-mode 功能：<br>CLI 模式允许使用源代码扫描本地目录以检测文件中的机密和密码。结果可能以明文或 JSON 格式返回。</p>
<ol start="4">
<li>其他辅助工具</li>
</ol>
<p>信息收集过程中，js文件不用仅限于当前网站版本，网站的历史版本中也可能会存在一些未失效的关键信息。<br>历史界面<br>wayback会记录网站版本更迭，可以获取到之前版本的网站，不仅可以用于收集历史js文件，也有可能找到一些后来删除的敏感资产信息，或者一些漏洞</p>
<p>历史信息查找工具：<br>waybackurls：<a target="_blank" rel="noopener" href="https://github.com/tomnomnom/waybackurls">https://github.com/tomnomnom/waybackurls</a><br>获取 Wayback Machine 知道的域的所有 URL</p>
<p>收集历史js文件<br>webbackurls target.com | grep “.js” | uniq |sort<br>通过Wayback Machine收集到的url js列表需要进行存活检验，避免误报，可以使用curl命令或者hakcheckurl工具进行检验。最后在做url提取即可。</p>
<p>反混肴<br>对于存在混淆的代码需要进行反混淆美化下，使其更易看懂</p>
<p>js-beautify：<a target="_blank" rel="noopener" href="https://github.com/beautify-web/js-beautify">https://github.com/beautify-web/js-beautify</a><br>这个小美化器将重新格式化和重新缩进书签、丑陋的 JavaScript、由 Dean Edward 的流行打包程序打包的解包脚本，以及由 npm 包 javascript-obfuscator处理的部分去混淆脚本。</p>
<p>de4js：<a target="_blank" rel="noopener" href="https://lelinhtinh.github.io/de4js/">https://lelinhtinh.github.io/de4js/</a><br>在线JavaScript 反混淆器和解包器</p>
<p>url采集<br>Rad：<a target="_blank" rel="noopener" href="https://stack.chaitin.com/tool/detail?id=2">https://stack.chaitin.com/tool/detail?id=2</a><br>一款专为安全扫描而生的浏览器爬虫。</p>
<p>whatweb-plus：<a target="_blank" rel="noopener" href="https://github.com/winezer0/whatweb-plus">https://github.com/winezer0/whatweb-plus</a><br>获取网站title头及Web指纹</p>
<p>url-extractor：<a target="_blank" rel="noopener" href="http://www.bulkdachecker.com/url-extractor/">http://www.bulkdachecker.com/url-extractor/</a><br>在线url提取</p>
<p>js中关键信息简记<br>密码、api密钥、secretKey等硬编码<br>隐藏的api接口，如后台、业务测试、某服务等，可能会存在未授权。<br>注释信息，注释为代码时，可能会通过修改注释改变业务逻辑，实现机制绕过，如xss绕过、登录绕过等。<br>Webpack 打包静态资源、js.map后缀文件，是jQuery中的一个新功能，支持Source Map,储存着各种api接口信息，而Webpack打包的信息很多都会放在js.map文件中，通过还原代码可能会找到一些未授权的api接口。相关处理工具如下：<br>sourcemapper<br><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/restore-source-tree">https://www.npmjs.com/package/restore-source-tree</a><br><a target="_blank" rel="noopener" href="https://github.com/paazmaya/shuji">https://github.com/paazmaya/shuji</a><br>子域名信息<br>依赖或框架，对于旧依赖或框架可以直接使用retire.js扫描相关漏洞。<br>……</p>
<h3 id="HOST碰撞"><a href="#HOST碰撞" class="headerlink" title="HOST碰撞"></a>HOST碰撞</h3><p><a target="_blank" rel="noopener" href="https://xz.aliyun.com/news/9089">https://xz.aliyun.com/news/9089</a><br>参考文章</p>
<h2 id="其他-1"><a href="#其他-1" class="headerlink" title="其他"></a>其他</h2><h3 id="OSINT"><a href="#OSINT" class="headerlink" title="OSINT"></a>OSINT</h3><p>开源情报，开源情报需要靠平时的积累，他就像新闻，没什么用但是又有用</p>
<p>情报资源：<br>OSINT-CN 一款在线分享国内外OSINT资源和工具的网站<br><a target="_blank" rel="noopener" href="https://start.me/p/GE7JQb/osint">https://start.me/p/GE7JQb/osint</a></p>
<p>Digital-Privacy Information Protection &amp; OSINT resources | 一个关于数字隐私搜集、保护、清理集一体的方案,外加开源信息收集(OSINT)对抗<br><a target="_blank" rel="noopener" href="https://github.com/ffffffff0x/Digital-Privacy">https://github.com/ffffffff0x/Digital-Privacy</a></p>
<p>丁爸网<br><a target="_blank" rel="noopener" href="http://dingba.top/">http://dingba.top/</a></p>
<p>微信公众号 情报小蜜蜂 little_bee007</p>
<p>iYouPort OSINT专栏<br><a target="_blank" rel="noopener" href="https://www.iyouport.org/category/osint/">https://www.iyouport.org/category/osint/</a></p>
<p>sinwindie&#x2F;OSINT - 各种平台的 OSINT “一张图” 系列<br><a target="_blank" rel="noopener" href="https://github.com/sinwindie/OSINT">https://github.com/sinwindie/OSINT</a></p>
<p>blaCCkHatHacEEkr&#x2F;OSINT_TIPS - OSINT 技巧合集<br><a target="_blank" rel="noopener" href="https://github.com/blaCCkHatHacEEkr/OSINT_TIPS">https://github.com/blaCCkHatHacEEkr/OSINT_TIPS</a></p>
<p>The Privacy, Security, &amp; OSINT Show - 讲述、介绍各类 OSINT 技能的博客<br><a target="_blank" rel="noopener" href="https://inteltechniques.com/podcast.html">https://inteltechniques.com/podcast.html</a></p>
<p>OSINT Framework - 非常著名的 OSINT 框架,有着非常丰富的 OSINT 资源<br><a target="_blank" rel="noopener" href="https://osintframework.com/">https://osintframework.com/</a></p>
<p>情报工具：<br><a target="_blank" rel="noopener" href="https://intelx.io/tools">https://intelx.io/tools</a> - 在线使用的开源情报和取证工具清单</p>
<p>OSINT Recon Tool - 在线的 osint 工具集合，加上思维脑图<br><a target="_blank" rel="noopener" href="https://recontool.org/#mindmap">https://recontool.org/#mindmap</a></p>
<p>woj-ciech&#x2F;SocialPath - 跟踪社交媒体平台上的用户<br><a target="_blank" rel="noopener" href="https://github.com/woj-ciech/SocialPath">https://github.com/woj-ciech/SocialPath</a></p>
<p>Greenwolf&#x2F;social_mapper - 通过面部识别跟踪不同社交平台目标的工具<br><a target="_blank" rel="noopener" href="https://github.com/Greenwolf/social_mapper">https://github.com/Greenwolf/social_mapper</a></p>
<p>bhavsec&#x2F;reconspider - 可用于扫描IP地址，电子邮件，网站，组织的 OSINT 工具<br><a target="_blank" rel="noopener" href="https://github.com/bhavsec/reconspider">https://github.com/bhavsec/reconspider</a></p>
<p>SpiderFoot：<a target="_blank" rel="noopener" href="https://www.spiderfoot.net/">https://www.spiderfoot.net/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.osint-labs.org/tools/">https://www.osint-labs.org/tools/</a></p>
<h2 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h2><p>大致的整个信息搜集流程就是这样，通过这个流程，我们成功的从只有一个公司名称到找到登陆点还有可疑站点，接下来就到了漏扫等更加有趣的部分了</p>
<h2 id="参考鸣谢"><a href="#参考鸣谢" class="headerlink" title="参考鸣谢"></a>参考鸣谢</h2><p><a target="_blank" rel="noopener" href="https://forum.butian.net/share/1976">https://forum.butian.net/share/1976</a><br><a target="_blank" rel="noopener" href="https://forum.butian.net/share/2841">https://forum.butian.net/share/2841</a></p>

	  <div class="article-footer-copyright">

    本博客采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议(CC BY-NC-SA 4.0) 发布.</a>

</div>


	</div>

	
	
	<div>
  	<center>

	<div class="pagination">

    
    
    <a type="button" class="btn btn-default disabled"><i class="fa fa-arrow-circle-o-left"></i>Prev</a>
    

    <a href="/" type="button" class="btn btn-default"><i class="fa fa-home"></i>Home</a>
    
    <a href="/2025/05/09/OSCP-Intentions/" type="button" class="btn btn-default ">Next<i
                class="fa fa-arrow-circle-o-right"></i></a>
    

    
</div>


    </center>
	</div>
	
	<!-- comment -->
	<!--
<section id="comment">
    <h2 class="title">Comments</h2>

    
</section>
-->
	
	
	
	</div> <!-- col-md-9/col-md-12 -->


	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2099-05-09 
	</div>
	

	<!-- categories -->
    
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i></a>	
    <ul id="categorys" class="tag_box list-unstyled collapse in">
          
  <li>
    <li><a href="/categories/速查/">速查<span>6</span></a></li> <li><a href="/categories/渗透测试/">渗透测试<span>4</span></a></li> <li><a href="/categories/SRC挖掘/">SRC挖掘<span>2</span></a></li>

<div class="widget tag">
  <h3 class="title">All Categories</h3>
     <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/SRC%E6%8C%96%E6%8E%98/">SRC挖掘</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AA%E4%BA%BA%E9%A1%B9%E7%9B%AE/">个人项目</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/">渗透测试</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AB%9E%E8%B5%9B/">竞赛</a><span class="category-list-count">23</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AB%9E%E8%B5%9B/CTF/">CTF</a><span class="category-list-count">23</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AB%9E%E8%B5%9B/CTF/Crypto/">Crypto</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AB%9E%E8%B5%9B/CTF/Misc/">Misc</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AB%9E%E8%B5%9B/CTF/PWN/">PWN</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AB%9E%E8%B5%9B/CTF/Reverse/">Reverse</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AB%9E%E8%B5%9B/CTF/Web/">Web</a><span class="category-list-count">9</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%80%9F%E6%9F%A5/">速查</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%80%9F%E6%9F%A5/%E5%8D%9A%E5%AE%A2/">博客</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%80%9F%E6%9F%A5/%E7%AB%9E%E8%B5%9B/">竞赛</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%80%9F%E6%9F%A5/%E7%AB%9E%E8%B5%9B/AWD/">AWD</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%80%9F%E6%9F%A5/%E7%AB%9E%E8%B5%9B/CTF/">CTF</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%80%9F%E6%9F%A5/%E8%93%9D%E9%98%9F/">蓝队</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%B6%E5%9C%BA%E7%BB%83%E4%B9%A0/">靶场练习</a><span class="category-list-count">14</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%B6%E5%9C%BA%E7%BB%83%E4%B9%A0/OSCP/">OSCP</a><span class="category-list-count">14</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%B6%E5%9C%BA%E7%BB%83%E4%B9%A0/OSCP/HackTheBox/">HackTheBox</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%B6%E5%9C%BA%E7%BB%83%E4%B9%A0/OSCP/HackTheBox/Easy/">Easy</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%B6%E5%9C%BA%E7%BB%83%E4%B9%A0/OSCP/HackTheBox/Hard/">Hard</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%B6%E5%9C%BA%E7%BB%83%E4%B9%A0/OSCP/HackTheBox/Medium/">Medium</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%B6%E5%9C%BA%E7%BB%83%E4%B9%A0/OSCP/Vulnhub/">Vulnhub</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%B6%E5%9C%BA%E7%BB%83%E4%B9%A0/OSCP/Vulnhub/Easy/">Easy</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%B6%E5%9C%BA%E7%BB%83%E4%B9%A0/OSCP/Vulnhub/Intermediate/">Intermediate</a><span class="category-list-count">5</span></li></ul></li></ul></li></ul></li></ul> 
</div>
 
  </li>
    </ul>
	</div>
	

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/速查/">速查<span>4</span></a></li> <li><a href="/tags/Web/">Web<span>10</span></a></li> <li><a href="/tags/渗透测试/">渗透测试<span>2</span></a></li>
    </ul>
	</div>
		

	<!-- toc -->
	<div class="meta-widget">
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->
		

	</div>
	
		

</div><!-- row -->

<!-- -->



	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  
  &copy; 2025 Hustler's Blog
  
      powered by <a href="http://hexo.io/" target="_blank">Hexo</a>.Theme <a href="https://github.com/Ares-X/hexo-theme-freemind.bithack" target="_blank">freemind.bithack</a>  
</p>
<br>
<p>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <span id="busuanzi_container_site_uv" style="display: inline;">本站总访问量<span id="busuanzi_value_site_uv"></span>次</span>
</p> </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>⬆︎TOP</span>
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>

</body>
   </html>
